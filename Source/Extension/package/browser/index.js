/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var e={690:(e,t,n)=>{n.r(t),n.d(t,{AppInsightsCore:()=>de,ApplicationAnalytics:()=>gt,ApplicationInsights:()=>_n,ApplicationInsightsContainer:()=>In,BaseCore:()=>ce,BaseTelemetryPlugin:()=>J,CoreUtils:()=>Ie,DependenciesPlugin:()=>fn,DistributedTracingModes:()=>Xe,Event:()=>Ue,Exception:()=>Je,LoggingSeverity:()=>C,Metric:()=>Ve,NotificationManager:()=>ue,PageView:()=>ze,PageViewPerformance:()=>He,PerfEvent:()=>H,PerfManager:()=>q,PropertiesPlugin:()=>nn,RemoteDependencyData:()=>lt,Sender:()=>qt,SeverityLevel:()=>Ke,Telemetry:()=>vn,Trace:()=>Re,Util:()=>at,_InternalMessageId:()=>b,doPerf:()=>doPerf});var r="function",i="object",a="undefined",o=Object,s=o.prototype,c=o.assign,l=o.create,u=o.defineProperty,d=s.hasOwnProperty,f=null;function getGlobal(e){return void 0===e&&(e=!0),f&&e||(typeof globalThis!==a&&globalThis&&(f=globalThis),typeof self!==a&&self&&(f=self),typeof window!==a&&window&&(f=window),typeof n.g!==a&&n.g&&(f=n.g)),f}function Helpers_throwTypeError(e){throw new TypeError(e)}function objCreateFn(e){if(l)return l(e);if(null==e)return{};var t=typeof e;function tmpFunc(){}return t!==i&&t!==r&&Helpers_throwTypeError("Object prototype may only be an Object:"+e),tmpFunc.prototype=e,new tmpFunc}(getGlobal()||{}).Symbol,(getGlobal()||{}).Reflect;var p=c||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])s.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},extendStaticsFn=function(e,t){return extendStaticsFn=o.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},extendStaticsFn(e,t)};function __extendsFn(e,t){function __(){this.constructor=e}typeof t!==r&&null!==t&&Helpers_throwTypeError("Class extends value "+String(t)+" is not a constructor or null"),extendStaticsFn(e,t),e.prototype=null===t?objCreateFn(t):(__.prototype=t.prototype,new __)}function __spreadArrayFn(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}var g="constructor",h="prototype",m="function",v="_dynClass",_="_unknown_",y=Object,S=y.getPrototypeOf,I=0;function _hasOwnProperty(e,t){return e&&y.prototype.hasOwnProperty.call(e,t)}function _isObjectOrArrayPrototype(e){return e&&(e===y.prototype||e===Array.prototype)}function _isObjectArrayOrFunctionPrototype(e){return _isObjectOrArrayPrototype(e)||e===Function.prototype}function _getObjProto(e){if(e){if(S)return S(e);var t=e.__proto__||e.prototype||(e.constructor?e.constructor.prototype:null);if(t)return t}return null}function _forEachProp(e,t){var n=[],r=y.getOwnPropertyNames;if(r)n=r(e);else for(var i in e)"string"==typeof i&&_hasOwnProperty(e,i)&&n.push(i);if(n&&n.length>0)for(var a=0;a<n.length;a++)t(n[a])}function _isDynamicCandidate(e,t,n){return t!==g&&typeof e[t]===m&&(n||_hasOwnProperty(e,t))}function _throwTypeError(e){throw new TypeError("DynamicProto: "+e)}function _hasVisited(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function _getInstFunc(e,t,n,r){var i=null;if(e&&_hasOwnProperty(n,v)){var a=e._dynInstFuncs||{};if((i=(a[n._dynClass]||{})[t])||_throwTypeError("Missing ["+t+"] "+m),!i._dynInstChk&&!1!==a._dynInstChk){for(var o=!_hasOwnProperty(e,t),s=_getObjProto(e),c=[];o&&s&&!_isObjectArrayOrFunctionPrototype(s)&&!_hasVisited(c,s);){var l=s[t];if(l){o=l===r;break}c.push(s),s=_getObjProto(s)}try{o&&(e[t]=i),i._dynInstChk=1}catch(e){a._dynInstChk=!1}}}return i}function _getProtoFunc(e,t,n){var r=t[e];return r===n&&(r=_getObjProto(t)[e]),typeof r!==m&&_throwTypeError("["+e+"] is not a "+m),r}function _populatePrototype(e,t,n,r,i){if(!_isObjectOrArrayPrototype(e)){var a=n._dynInstFuncs=n._dynInstFuncs||{},o=a[t]=a[t]||{};!1!==a._dynInstChk&&(a._dynInstChk=!!i),_forEachProp(n,(function(t){_isDynamicCandidate(n,t,!1)&&n[t]!==r[t]&&(o[t]=n[t],delete n[t],(!_hasOwnProperty(e,t)||e[t]&&!e[t]._isDynProxy)&&(e[t]=function _createDynamicPrototype(e,t){var dynProtoProxy=function(){return(_getInstFunc(this,t,e,dynProtoProxy)||_getProtoFunc(t,e,dynProtoProxy)).apply(this,arguments)};return dynProtoProxy._isDynProxy=1,dynProtoProxy}(e,t)))}))}}function _getObjName(e,t){return _hasOwnProperty(e,h)?e.name||t||_:((e||{}).constructor||{}).name||t||_}function dynamicProto(e,t,n,r){_hasOwnProperty(e,h)||_throwTypeError("theClass is an invalid class definition.");var i=e.prototype;(function _checkPrototype(e,t){if(S)for(var n=[],r=_getObjProto(t);r&&!_isObjectArrayOrFunctionPrototype(r)&&!_hasVisited(n,r);){if(r===e)return!0;n.push(r),r=_getObjProto(r)}return!1})(i,t)||_throwTypeError("["+_getObjName(e)+"] is not in class hierarchy of ["+_getObjName(t)+"]");var a=null;_hasOwnProperty(i,v)?a=i._dynClass:(a="_dynCls$"+_getObjName(e,"_")+"$"+I,I++,i._dynClass=a);var o=dynamicProto._dfOpts,s=!!o.useBaseInst;s&&r&&void 0!==r.useBaseInst&&(s=!!r.useBaseInst);var c=function _getInstanceFuncs(e){var t={};return _forEachProp(e,(function(n){!t[n]&&_isDynamicCandidate(e,n,!1)&&(t[n]=e[n])})),t}(t),l=function _getBaseFuncs(e,t,n,r){function _instFuncProxy(e,t,n){var i=t[n];if(i._isDynProxy&&r){var a=e._dynInstFuncs||{};!1!==a._dynInstChk&&(i=(a[t._dynClass]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var i={};_forEachProp(n,(function(e){i[e]=_instFuncProxy(t,n,e)}));for(var a=_getObjProto(e),o=[];a&&!_isObjectArrayOrFunctionPrototype(a)&&!_hasVisited(o,a);)_forEachProp(a,(function(e){!i[e]&&_isDynamicCandidate(a,e,!S)&&(i[e]=_instFuncProxy(t,a,e))})),o.push(a),a=_getObjProto(a);return i}(i,t,c,s);n(t,l);var u=!!S&&!!o.setInstFuncs;u&&r&&(u=!!r.setInstFuncs),_populatePrototype(i,a,t,c,!1!==u)}dynamicProto._dfOpts={setInstFuncs:!0,useBaseInst:!0};const x=dynamicProto;var C;!function(e){e[e.CRITICAL=1]="CRITICAL",e[e.WARNING=2]="WARNING"}(C||(C={}));var b={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105},T=u;o.freeze,o.seal;function objToString(e){return s.toString.call(e)}function isUndefined(e){return void 0===e||typeof e===a}function isNullOrUndefined(e){return null===e||isUndefined(e)}function isNotNullOrUndefined(e){return!isNullOrUndefined(e)}function HelperFuncs_hasOwnProperty(e,t){return e&&d.call(e,t)}function isObject(e){return typeof e===i}function isFunction(e){return typeof e===r}function attachEvent(e,t,n,r){void 0===r&&(r=!1);var i=!1;if(!isNullOrUndefined(e))try{isNullOrUndefined(e.addEventListener)?isNullOrUndefined(e.attachEvent)||(e.attachEvent("on"+t,n),i=!0):(e.addEventListener(t,n,r),i=!0)}catch(e){}return i}function objForEachKey(e,t){if(e)for(var n in e)d.call(e,n)&&t.call(e,n,e[n])}function strContains(e,t){return!(!e||!t)&&-1!==e.indexOf(t)}function isDate(e){return"[object Date]"===objToString(e)}function isArray(e){return"[object Array]"===objToString(e)}function isError(e){return"[object Error]"===objToString(e)}function HelperFuncs_isString(e){return"string"==typeof e}function isNumber(e){return"number"==typeof e}function isBoolean(e){return"boolean"==typeof e}function toISOString(e){if(e){if(e.toISOString)return e.toISOString();if(isDate(e)){var pad=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return e.getUTCFullYear()+"-"+pad(e.getUTCMonth()+1)+"-"+pad(e.getUTCDate())+"T"+pad(e.getUTCHours())+":"+pad(e.getUTCMinutes())+":"+pad(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}}function arrForEach(e,t,n){var r=e.length;try{for(var i=0;i<r&&(!(i in e)||-1!==t.call(n||e,e[i],i,e));i++);}catch(e){}}function HelperFuncs_arrIndexOf(e,t,n){var r=e.length,i=n||0;try{for(var a=Math.max(i>=0?i:r-Math.abs(i),0);a<r;a++)if(a in e&&e[a]===t)return a}catch(e){}return-1}function arrMap(e,t,n){var r=e.length,i=n||e,a=new Array(r);try{for(var o=0;o<r;o++)o in e&&(a[o]=t.call(i,e[o],e))}catch(e){}return a}function arrReduce(e,t,n){var r,i=e.length,a=0;if(arguments.length>=3)r=arguments[2];else{for(;a<i&&!(a in e);)a++;r=e[a++]}for(;a<i;)a in e&&(r=t(r,e[a],a,e)),a++;return r}function strTrim(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")}var w=!{toString:null}.propertyIsEnumerable("toString"),E=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function objKeys(e){var t=typeof e;t===r||t===i&&null!==e||Helpers_throwTypeError("objKeys called on non-object");var n=[];for(var a in e)e&&d.call(e,a)&&n.push(a);if(w)for(var o=E.length,s=0;s<o;s++)e&&d.call(e,E[s])&&n.push(E[s]);return n}function objDefineAccessors(e,t,n,r){if(T)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),T(e,t,i),!0}catch(e){}return!1}function dateNow(){var e=Date;return e.now?e.now():(new e).getTime()}function getExceptionName(e){return isError(e)?e.name:""}function setValue(e,t,n,r,i){var a=n;return e&&((a=e[t])===n||i&&!i(a)||r&&!r(n)||(a=n,e[t]=a)),a}function getSetValue(e,t,n){var r;return e?!(r=e[t])&&isNullOrUndefined(r)&&(r=isUndefined(n)?{}:n,e[t]=r):r=isUndefined(n)?{}:n,r}function isNotTruthy(e){return!e}function isTruthy(e){return!!e}function throwError(e){throw new Error(e)}function proxyAssign(e,t,n){if(e&&t&&e!==t&&isObject(e)&&isObject(t)){var _loop_1=function(r){if(HelperFuncs_isString(r)){var i=t[r];isFunction(i)?n&&!n(r,!0,t,e)||(e[r]=(a=r,function(){var e=arguments;return t[a].apply(t,e)})):n&&!n(r,!1,t,e)||(HelperFuncs_hasOwnProperty(e,r)&&delete e[r],objDefineAccessors(e,r,(function(){return t[r]}),(function(e){t[r]=e}))||(e[r]=i))}var a};for(var r in t)_loop_1(r)}return e}function optimizeObject(e){return e&&(e=o(c?c({},e):e)),e}var P="window",N="JSON",D="msie",k="trident/",A=null,F=null,O=!1,M=null,U=null;function _hasProperty(e,t){var n=!1;if(e){try{if(!(n=t in e)){var r=e.prototype;r&&(n=t in r)}}catch(e){}if(!n)try{n=!isUndefined((new e)[t])}catch(e){}}return n}function getGlobalInst(e){var t=getGlobal();return t&&t[e]?t[e]:e===P&&hasWindow()?window:null}function hasWindow(){return Boolean(typeof window===i&&window)}function getWindow(){return hasWindow()?window:getGlobalInst(P)}function hasDocument(){return Boolean(typeof document===i&&document)}function EnvUtils_getDocument(){return hasDocument()?document:getGlobalInst("document")}function hasNavigator(){return Boolean(typeof navigator===i&&navigator)}function getNavigator(){return hasNavigator()?navigator:getGlobalInst("navigator")}function getHistory(){return function hasHistory(){return Boolean(typeof history===i&&history)}()?history:getGlobalInst("history")}function getLocation(e){if(e&&O){var t=getGlobalInst("__mockLocation");if(t)return t}return typeof location===i&&location?location:getGlobalInst("location")}function getPerformance(){return getGlobalInst("performance")}function hasJSON(){return Boolean(typeof JSON===i&&JSON||null!==getGlobalInst(N))}function getJSON(){return hasJSON()?JSON||getGlobalInst(N):null}function isIE(){var e=getNavigator();if(e&&(e.userAgent!==F||null===A)){var t=((F=e.userAgent)||"").toLowerCase();A=strContains(t,D)||strContains(t,k)}return A}function getIEVersion(e){if(void 0===e&&(e=null),!e){var t=getNavigator()||{};e=t?(t.userAgent||"").toLowerCase():""}var n=(e||"").toLowerCase();if(strContains(n,D)){var r=EnvUtils_getDocument()||{};return Math.max(parseInt(n.split(D)[1]),r.documentMode||0)}if(strContains(n,k)){var i=parseInt(n.split(k)[1]);if(i)return i+4}return null}function dumpObj(e){var t=Object.prototype.toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":hasJSON()&&(n=getJSON().stringify(e)),t+n}function isBeaconsSupported(){return null===U&&(U=hasNavigator()&&Boolean(getNavigator().sendBeacon)),U}function isFetchSupported(e){var t=!1;try{t=!!getGlobalInst("fetch");var n=getGlobalInst("Request");t&&e&&n&&(t=_hasProperty(n,"keepalive"))}catch(e){}return t}function useXDomainRequest(){return null===M&&(M="undefined"!=typeof XDomainRequest)&&isXhrSupported()&&(M=M&&!_hasProperty(getGlobalInst("XMLHttpRequest"),"withCredentials")),M}function isXhrSupported(){var e=!1;try{e=!!getGlobalInst("XMLHttpRequest")}catch(e){}return e}var R,L=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],j=null;function _listenerProxyFunc(e,t){return function(){var n=arguments,r=getDebugExt(t);if(r){var i=r.listener;i&&i[e]&&i[e].apply(i,n)}}}function getDebugExt(e){var t=j;return t||!0===e.disableDbgExt||(t=j||function _getExtensionNamespace(){var e=getGlobalInst("Microsoft");return e&&(j=e.ApplicationInsights),j}()),t?t.ChromeDbgExt:null}function _sanitizeDiagnosticText(e){return e?'"'+e.replace(/\"/g,"")+'"':""}function _logToConsole(e,t){var n=function getConsole(){return typeof console!==a?console:getGlobalInst("console")}();if(n){var r="log";n[e]&&(r=e),isFunction(n[r])&&n[r](t)}}var V=function(){function _InternalLogMessage(e,t,n,r){void 0===n&&(n=!1);var i=this;i.messageId=e,i.message=(n?"AI: ":"AI (Internal): ")+e;var a="";hasJSON()&&(a=getJSON().stringify(r));var o=(t?" message:"+_sanitizeDiagnosticText(t):"")+(r?" props:"+_sanitizeDiagnosticText(a):"");i.message+=o}return _InternalLogMessage.dataType="MessageData",_InternalLogMessage}();function safeGetLogger(e,t){return(e||{}).logger||new B(t)}var B=function DiagnosticLogger(e){this.identifier="DiagnosticLogger",this.queue=[];var t=0,n={};x(DiagnosticLogger,this,(function(r){function _getConfigValue(t,n){var r=e[t];return isNullOrUndefined(r)?n:r}function _debugExtMsg(t,n){var r=getDebugExt(e);r&&r.diagLog&&r.diagLog(t,n)}isNullOrUndefined(e)&&(e={}),r.consoleLoggingLevel=function(){return _getConfigValue("loggingLevelConsole",0)},r.telemetryLoggingLevel=function(){return _getConfigValue("loggingLevelTelemetry",1)},r.maxInternalMessageLimit=function(){return _getConfigValue("maxMessageLimit",25)},r.enableDebugExceptions=function(){return _getConfigValue("enableDebugExceptions",!1)},r.throwInternal=function(e,t,i,a,o){void 0===o&&(o=!1);var s=new V(t,i,o,a);if(r.enableDebugExceptions())throw s;var c=e===C.CRITICAL?"errorToConsole":"warnToConsole";if(isUndefined(s.message))_debugExtMsg("throw"+(e===C.CRITICAL?"Critical":"Warning"),s);else{var l=r.consoleLoggingLevel();if(o){var u=+s.messageId;!n[u]&&l>=e&&(r[c](s.message),n[u]=!0)}else l>=e&&r[c](s.message);r.logInternalMessage(e,s)}},r.warnToConsole=function(e){_logToConsole("warn",e),_debugExtMsg("warning",e)},r.errorToConsole=function(e){_logToConsole("error",e),_debugExtMsg("error",e)},r.resetInternalMessageCount=function(){t=0,n={}},r.logInternalMessage=function(e,i){if(!function _areInternalMessagesThrottled(){return t>=r.maxInternalMessageLimit()}()){var a=!0,o="AITR_"+i.messageId;if(n[o]?a=!1:n[o]=!0,a&&(e<=r.telemetryLoggingLevel()&&(r.queue.push(i),t++,_debugExtMsg(e===C.CRITICAL?"error":"warn",i)),t===r.maxInternalMessageLimit())){var s="Internal events throttle limit per PageView reached for this app.",c=new V(b.MessageLimitPerPVExceeded,s,!1);r.queue.push(c),e===C.CRITICAL?r.errorToConsole(s):r.warnToConsole(s)}}}}))},z=null,H=function(){function PerfEvent(e,t,n){var r,i=this,a=!1;(i.start=dateNow(),i.name=e,i.isAsync=n,i.isChildEvt=function(){return!1},isFunction(t))&&(a=objDefineAccessors(i,"payload",(function(){return!r&&isFunction(t)&&(r=t(),t=null),r})));i.getCtx=function(e){return e?e===PerfEvent.ParentContextKey||e===PerfEvent.ChildrenContextKey?i[e]:(i.ctx||{})[e]:null},i.setCtx=function(e,t){if(e)if(e===PerfEvent.ParentContextKey)i[e]||(i.isChildEvt=function(){return!0}),i[e]=t;else if(e===PerfEvent.ChildrenContextKey)i[e]=t;else{(i.ctx=i.ctx||{})[e]=t}},i.complete=function(){var e=0,n=i.getCtx(PerfEvent.ChildrenContextKey);if(isArray(n))for(var r=0;r<n.length;r++){var o=n[r];o&&(e+=o.time)}i.time=dateNow()-i.start,i.exTime=i.time-e,i.complete=function(){},!a&&isFunction(t)&&(i.payload=t())}}return PerfEvent.ParentContextKey="parent",PerfEvent.ChildrenContextKey="childEvts",PerfEvent}(),q=function PerfManager(e){this.ctx={},x(PerfManager,this,(function(t){t.create=function(e,t,n){return new H(e,t,n)},t.fire=function(t){t&&(t.complete(),e&&isFunction(e.perfEvent)&&e.perfEvent(t))},t.setCtx=function(e,n){e&&((t.ctx=t.ctx||{})[e]=n)},t.getCtx=function(e){return(t.ctx||{})[e]}}))},G="CoreUtils.doPerf";function doPerf(e,t,n,r,i){if(e){var a=e;if(isFunction(a.getPerfMgr)&&(a=a.getPerfMgr()),a){var o=void 0,s=a.getCtx(G);try{if(o=a.create(t(),r,i)){if(s&&o.setCtx&&(o.setCtx(H.ParentContextKey,s),s.getCtx&&s.setCtx)){var c=s.getCtx(H.ChildrenContextKey);c||(c=[],s.setCtx(H.ChildrenContextKey,c)),c.push(o)}return a.setCtx(G,o),n(o)}}catch(e){o&&o.setCtx&&o.setCtx("exception",e)}finally{o&&a.fire(o),a.setCtx(G,s)}}}return n()}var K=function K(e,t){var n=this,r=null,i=isFunction(e.processTelemetry),a=isFunction(e.setNextPlugin);n._hasRun=!1,n.getPlugin=function(){return e},n.getNext=function(){return r},n.setNext=function(e){r=e},n.processTelemetry=function(o,s){s||(s=t);var c=e?e.identifier:"TelemetryPluginChain";doPerf(s?s.core():null,(function(){return c+":processTelemetry"}),(function(){if(e&&i){n._hasRun=!0;try{s.setNext(r),a&&e.setNextPlugin(r),r&&(r._hasRun=!1),e.processTelemetry(o,s)}catch(n){var t=r&&r._hasRun;r&&t||s.diagLog().throwInternal(C.CRITICAL,b.PluginException,"Plugin ["+e.identifier+"] failed during processTelemetry - "+dumpObj(n)),r&&!t&&r.processTelemetry(o,s)}}else r&&(n._hasRun=!0,r.processTelemetry(o,s))}),(function(){return{item:o}}),!o.sync)}};function _createProxyChain(e,t){var n=[];if(e&&e.length>0)for(var r=null,i=0;i<e.length;i++){var a=e[i];if(a&&isFunction(a.processTelemetry)){var o=new K(a,t);n.push(o),r&&r.setNext(o),r=o}}return n.length>0?n[0]:null}var W=function ProcessTelemetryContext(e,t,n,r){var i=this,a=null;null!==r&&(e&&isFunction(e.getPlugin)?a=function _copyProxyChain(e,t,n){var r=[],i=!n;if(e)for(;e;){var a=e.getPlugin();(i||a===n)&&(i=!0,r.push(a)),e=e.getNext()}return i||r.push(n),_createProxyChain(r,t)}(e,i,r||e.getPlugin()):r?a=function _copyPluginChain(e,t,n){var r=e,i=!1;return n&&e&&(r=[],arrForEach(e,(function(e){(i||e===n)&&(i=!0,r.push(e))}))),n&&!i&&(r||(r=[]),r.push(n)),_createProxyChain(r,t)}(e,i,r):isUndefined(r)&&(a=_createProxyChain(e,i))),i.core=function(){return n},i.diagLog=function(){return safeGetLogger(n,t)},i.getCfg=function(){return t},i.getExtCfg=function(e,n){var r;if(void 0===n&&(n={}),t){var i=t.extensionConfig;i&&e&&(r=i[e])}return r||n},i.getConfig=function(e,n,r){var a;void 0===r&&(r=!1);var o=i.getExtCfg(e,null);return o&&!isNullOrUndefined(o[n])?a=o[n]:t&&!isNullOrUndefined(t[n])&&(a=t[n]),isNullOrUndefined(a)?r:a},i.hasNext=function(){return null!=a},i.getNext=function(){return a},i.setNext=function(e){a=e},i.processNext=function(e){var t=a;t&&(a=t.getNext(),t.processTelemetry(e,i))},i.createNew=function(e,r){return void 0===e&&(e=null),new ProcessTelemetryContext(e||a,t,n,r)}},X="extensionConfig",J=function(){function BaseTelemetryPlugin(){var e=this,t=!1,n=null,r=null;e.core=null,e.diagLog=function(t){return e._getTelCtx(t).diagLog()},e.isInitialized=function(){return t},e.setInitialized=function(e){t=e},e.setNextPlugin=function(e){r=e},e.processNext=function(e,t){t?t.processNext(e):r&&isFunction(r.processTelemetry)&&r.processTelemetry(e,null)},e._getTelCtx=function(t){void 0===t&&(t=null);var i=t;if(!i){var a=n||new W(null,{},e.core);i=r&&r.getPlugin?a.createNew(null,r.getPlugin):a.createNew(null,r)}return i},e._baseTelInit=function(i,a,o,s){i&&setValue(i,X,[],null,isNullOrUndefined),!s&&a&&(s=a.getProcessTelContext().getNext());var c=r;r&&r.getPlugin&&(c=r.getPlugin()),e.core=a,n=new W(s,i,a,c),t=!0}}return BaseTelemetryPlugin.prototype.initialize=function(e,t,n,r){this._baseTelInit(e,t,n,r)},BaseTelemetryPlugin}();function initializePlugins(e,t){for(var n=[],r=null,i=e.getNext();i;){var a=i.getPlugin();a&&(r&&isFunction(r.setNextPlugin)&&isFunction(a.processTelemetry)&&r.setNextPlugin(a),isFunction(a.isInitialized)&&a.isInitialized()||n.push(a),r=a,i=i.getNext())}arrForEach(n,(function(n){n.initialize(e.getCfg(),e.core(),t,e.getNext())}))}function sortPlugins(e){return e.sort((function(e,t){var n=0,r=isFunction(t.processTelemetry);return isFunction(e.processTelemetry)?n=r?e.priority-t.priority:1:r&&(n=-1),n}))}var Y=500,Q=function(e){function ChannelController(){var t,n=e.call(this)||this;function _addChannelQueue(e){e&&e.length>0&&(function _checkQueuePriority(e){arrForEach(e,(function(e){e.priority<Y&&throwError("Channel has invalid priority"+e.identifier)}))}(e=e.sort((function(e,t){return e.priority-t.priority}))),t.push(e))}return n.identifier="ChannelControllerPlugin",n.priority=500,x(ChannelController,n,(function(e,r){e.setNextPlugin=function(e){},e.processTelemetry=function(e,r){t&&arrForEach(t,(function(t){t.length>0&&n._getTelCtx(r).createNew(t).processNext(e)}))},e.getChannelControls=function(){return t},e.initialize=function(n,i,a){e.isInitialized()||(r.initialize(n,i,a),function _createChannelQueues(e,n){t=[],e&&arrForEach(e,(function(e){return _addChannelQueue(e)}));if(n){var r=[];arrForEach(n,(function(e){e.priority>Y&&r.push(e)})),_addChannelQueue(r)}}((n||{}).channels,a),arrForEach(t,(function(e){return initializePlugins(new W(e,n,i),a)})))}})),n}var t;return __extendsFn(ChannelController,e),ChannelController._staticInit=(objDefineAccessors(t=ChannelController.prototype,"ChannelControls",t.getChannelControls),void objDefineAccessors(t,"channelQueue",t.getChannelControls)),ChannelController}(J),Z="toGMTString",$="toUTCString",ee="expires",te="",ne=null,re=null,ie=null,ae=EnvUtils_getDocument(),oe={},se={};function _gblCookieMgr(e,t){var n=createCookieMgr._ckMgr||se._ckMgr;return n||(n=createCookieMgr._ckMgr=createCookieMgr(e,t),se._ckMgr=n),n}function _isMgrEnabled(e){return!e||e.isEnabled()}function safeGetCookieMgr(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t.cookieCfg;n=r._ckMgr?r._ckMgr:createCookieMgr(t)}return n||(n=_gblCookieMgr(t,(e||{}).logger)),n}function createCookieMgr(e,t){var n=function _createCookieMgrConfig(e){var t=e.cookieCfg=e.cookieCfg||{};if(setValue(t,"domain",e.cookieDomain,isNotNullOrUndefined,isNullOrUndefined),setValue(t,"path",e.cookiePath||"/",null,isNullOrUndefined),isNullOrUndefined(t.enabled)){var n=void 0;isUndefined(e.isCookieUseDisabled)||(n=!e.isCookieUseDisabled),isUndefined(e.disableCookiesUsage)||(n=!e.disableCookiesUsage),t.enabled=n}return t}(e||se),r=n.path||"/",i=n.domain,a=!1!==n.enabled,o={isEnabled:function(){var e=a&&areCookiesSupported(t),n=se._ckMgr;return e&&n&&o!==n&&(e=_isMgrEnabled(n)),e},setEnabled:function(e){a=!1!==e},set:function(e,t,a,s,c){var l=!1;if(_isMgrEnabled(o)){var u={},d=strTrim(t||te),f=d.indexOf(";");if(-1!==f&&(d=strTrim(t.substring(0,f)),u=_extractParts(t.substring(f+1))),setValue(u,"domain",s||i,isTruthy,isUndefined),!isNullOrUndefined(a)){var p=isIE();if(isUndefined(u.expires)){var g=dateNow()+1e3*a;if(g>0){var h=new Date;h.setTime(g),setValue(u,ee,_formatDate(h,p?Z:$)||_formatDate(h,p?Z:$)||te,isTruthy)}}p||setValue(u,"max-age",te+a,null,isUndefined)}var m=getLocation();m&&"https:"===m.protocol&&(setValue(u,"secure",null,null,isUndefined),null===re&&(re=!uaDisallowsSameSiteNone((getNavigator()||{}).userAgent)),re&&setValue(u,"SameSite","None",null,isUndefined)),setValue(u,"path",c||r,null,isUndefined),(n.setCookie||_setCookieValue)(e,_formatCookieValue(d,u)),l=!0}return l},get:function(e){var t=te;return _isMgrEnabled(o)&&(t=(n.getCookie||_getCookieValue)(e)),t},del:function(e,t){var n=!1;return _isMgrEnabled(o)&&(n=o.purge(e,t)),n},purge:function(e,r){var i,a=!1;if(areCookiesSupported(t)){var o=((i={}).path=r||"/",i.expires="Thu, 01 Jan 1970 00:00:01 GMT",i);isIE()||(o["max-age"]="0"),(n.delCookie||_setCookieValue)(e,_formatCookieValue(te,o)),a=!0}return a}};return o._ckMgr=o,o}function areCookiesSupported(e){if(null===ne){ne=!1;try{ne=void 0!==(ae||{}).cookie}catch(t){e&&e.throwInternal(C.WARNING,b.CannotAccessCookie,"Cannot access document.cookie - "+getExceptionName(t),{exception:dumpObj(t)})}}return ne}function _extractParts(e){var t={};e&&e.length&&arrForEach(strTrim(e).split(";"),(function(e){if(e=strTrim(e||te)){var n=e.indexOf("=");-1===n?t[e]=null:t[strTrim(e.substring(0,n))]=strTrim(e.substring(n+1))}}));return t}function _formatDate(e,t){return isFunction(e[t])?e[t]():null}function _formatCookieValue(e,t){var n=e||te;return objForEachKey(t,(function(e,t){n+="; "+e+(isNullOrUndefined(t)?te:"="+t)})),n}function _getCookieValue(e){var t=te;if(ae){var n=ae.cookie||te;ie!==n&&(oe=_extractParts(n),ie=n),t=strTrim(oe[e]||te)}return t}function _setCookieValue(e,t){ae&&(ae.cookie=e+"="+t)}function uaDisallowsSameSiteNone(e){return!!HelperFuncs_isString(e)&&(!(!strContains(e,"CPU iPhone OS 12")&&!strContains(e,"iPad; CPU OS 12"))||(!!(strContains(e,"Macintosh; Intel Mac OS X 10_14")&&strContains(e,"Version/")&&strContains(e,"Safari"))||(!(!strContains(e,"Macintosh; Intel Mac OS X 10_14")||!function strEndsWith(e,t){if(e&&t){var n=t.length,r=e.length;if(e===t)return!0;if(r>=n){for(var i=r-1,a=n-1;a>=0;a--){if(e[i]!=t[a])return!1;i--}return!0}}return!1}(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))||(!(!strContains(e,"Chrome/5")&&!strContains(e,"Chrome/6"))||(!(!strContains(e,"UnrealEngine")||strContains(e,"Chrome"))||!(!strContains(e,"UCBrowser/12")&&!strContains(e,"UCBrowser/11")))))))}function _createPerfManager(e,t){return new q(t)}var ce=function BaseCore(){var e,t,n,r,i,a=!1;x(BaseCore,this,(function(o){o._extensions=new Array,t=new Q,o.logger=new B({loggingLevelConsole:C.CRITICAL}),e=[],o.isInitialized=function(){return a},o.initialize=function(e,r,i,s){o.isInitialized()&&throwError("Core should not be initialized more than once"),e&&!isNullOrUndefined(e.instrumentationKey)||throwError("Please provide instrumentation key"),n=s,o._notificationManager=s,o.config=e||{},s&&!0!==o.config.disableDbgExt&&s.addNotificationListener(function getDebugListener(e){if(!R){R={};for(var t=0;t<L.length;t++)R[L[t]]=_listenerProxyFunc(L[t],e)}return R}(e)),o.config.enablePerfMgr&&setValue(o.config,"createPerfMgr",_createPerfManager),e.extensions=isNullOrUndefined(e.extensions)?[]:e.extensions,getSetValue(e,X).NotificationManager=s,i&&(o.logger=i);var c=[];c.push.apply(c,__spreadArrayFn(__spreadArrayFn([],r),e.extensions)),c=sortPlugins(c);var l=[],u=[],d={};arrForEach(c,(function(e){(isNullOrUndefined(e)||isNullOrUndefined(e.initialize))&&throwError("Extensions must provide callback to initialize");var n=e.priority,r=e.identifier;e&&n&&(isNullOrUndefined(d[n])?d[n]=r:i.warnToConsole("Two extensions have same priority #"+n+" - "+d[n]+", "+r)),!n||n<t.priority?l.push(e):u.push(e)})),c.push(t),l.push(t),c=sortPlugins(c),o._extensions=c,initializePlugins(new W([t],e,o),c),initializePlugins(new W(l,e,o),c),o._extensions=l,0===o.getTransmissionControls().length&&throwError("No channels available"),a=!0,o.releaseQueue()},o.getTransmissionControls=function(){return t.getChannelControls()},o.track=function(t){setValue(t,"iKey",o.config.instrumentationKey,null,isNotTruthy),setValue(t,"time",toISOString(new Date),null,isNotTruthy),setValue(t,"ver","4.0",null,isNullOrUndefined),o.isInitialized()?o.getProcessTelContext().processNext(t):e.push(t)},o.getProcessTelContext=function(){var e=o._extensions,n=e;return e&&0!==e.length||(n=[t]),new W(n,o.config,o)},o.getNotifyMgr=function(){return n||(n=objCreateFn({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,t){},eventsSendRequest:function(e,t){}}),o._notificationManager=n),n},o.getCookieMgr=function(){return i||(i=createCookieMgr(o.config,o.logger)),i},o.setCookieMgr=function(e){i=e},o.getPerfMgr=function(){return r||o.config&&o.config.enablePerfMgr&&isFunction(o.config.createPerfMgr)&&(r=o.config.createPerfMgr(o,o.getNotifyMgr())),r||function getGblPerfMgr(){return z}()},o.setPerfMgr=function(e){r=e},o.eventCnt=function(){return e.length},o.releaseQueue=function(){e.length>0&&(arrForEach(e,(function(e){o.getProcessTelContext().processNext(e)})),e=[])}}))},le=2,ue=function NotificationManager(e){this.listeners=[];var t=!!(e||{}).perfEvtsSendAll;x(NotificationManager,this,(function(e){e.addNotificationListener=function(t){e.listeners.push(t)},e.removeNotificationListener=function(t){for(var n=HelperFuncs_arrIndexOf(e.listeners,t);n>-1;)e.listeners.splice(n,1),n=HelperFuncs_arrIndexOf(e.listeners,t)},e.eventsSent=function(t){arrForEach(e.listeners,(function(e){e&&e.eventsSent&&setTimeout((function(){return e.eventsSent(t)}),0)}))},e.eventsDiscarded=function(t,n){arrForEach(e.listeners,(function(e){e&&e.eventsDiscarded&&setTimeout((function(){return e.eventsDiscarded(t,n)}),0)}))},e.eventsSendRequest=function(t,n){arrForEach(e.listeners,(function(e){if(e&&e.eventsSendRequest)if(n)setTimeout((function(){return e.eventsSendRequest(t,n)}),0);else try{e.eventsSendRequest(t,n)}catch(e){}}))},e.perfEvent=function(n){n&&(!t&&n.isChildEvt()||arrForEach(e.listeners,(function(e){if(e&&e.perfEvent)if(n.isAsync)setTimeout((function(){return e.perfEvent(n)}),0);else try{e.perfEvent(n)}catch(e){}})))}}))},de=function(e){function AppInsightsCore(){var t=e.call(this)||this,n=0;return x(AppInsightsCore,t,(function(e,t){function _notifyInvalidEvent(t){var n=e.getNotifyMgr();n&&n.eventsDiscarded([t],le)}e.initialize=function(e,n,r,i){t.initialize(e,n,r||new B(e),i||new ue(e))},e.track=function(n){doPerf(e.getPerfMgr(),(function(){return"AppInsightsCore:track"}),(function(){null===n&&(_notifyInvalidEvent(n),throwError("Invalid telemetry item")),function _validateTelemetryItem(e){if(isNullOrUndefined(e.name))throw _notifyInvalidEvent(e),Error("telemetry name required")}(n),t.track(n)}),(function(){return{item:n}}),!n.sync)},e.addNotificationListener=function(t){var n=e.getNotifyMgr();n&&n.addNotificationListener(t)},e.removeNotificationListener=function(t){var n=e.getNotifyMgr();n&&n.removeNotificationListener(t)},e.pollInternalLogs=function(t){var r=e.config.diagnosticLogInterval;return r&&r>0||(r=1e4),n&&e.stopPollingInternalLogs(),n=setInterval((function(){var n=e.logger?e.logger.queue:[];arrForEach(n,(function(n){var r={name:t||"InternalMessageId: "+n.messageId,iKey:e.config.instrumentationKey,time:toISOString(new Date),baseType:V.dataType,baseData:{message:n.message}};e.track(r)})),n.length=0}),r)},e.stopPollingInternalLogs=function(){n&&(clearInterval(n),n=0)}})),t}return __extendsFn(AppInsightsCore,e),AppInsightsCore}(ce),fe=4294967296,pe=4294967295,ge=!1,he=123456789,me=987654321;function _mwcSeed(e){e<0&&(e>>>=0),he=123456789+e&pe,me=987654321-e&pe,ge=!0}function _autoSeedMwc(){try{var e=2147483647&dateNow();_mwcSeed((Math.random()*fe^e)+e)}catch(e){}}function randomValue(e){return e>0?Math.floor(random32()/pe*(e+1))>>>0:0}function random32(e){var t,n=function getCrypto(){return getGlobalInst("crypto")}()||function getMsCrypto(){return getGlobalInst("msCrypto")}();return n&&n.getRandomValues?t=n.getRandomValues(new Uint32Array(1))[0]&pe:isIE()?(ge||_autoSeedMwc(),t=mwcRandom32()&pe):t=Math.floor(fe*Math.random()|0),e||(t>>>=0),t}function mwcRandom32(e){var t=((me=36969*(65535&me)+(me>>16)&pe)<<16)+(65535&(he=18e3*(65535&he)+(he>>16)&pe))>>>0&pe|0;return e||(t>>>=0),t}var ve,_e="visibilitychange",ye="pagehide",Se=null;function addEventHandler(e,t){var n=!1,r=getWindow();r&&(n=attachEvent(r,e,t),n=attachEvent(r.body,e,t)||n);var i=EnvUtils_getDocument();return i&&(n=attachEvent(i,e,t)||n),n}function addEventListeners(e,t,n){var r=!1;if(t&&e&&isArray(e)){var i=[];arrForEach(e,(function(e){HelperFuncs_isString(e)&&(n&&-1!==HelperFuncs_arrIndexOf(n,e)?i.push(e):r=addEventHandler(e,t)||r)})),!r&&i.length>0&&(r=addEventListeners(i,t))}return r}function addPageUnloadEventListener(e,t){return addEventListeners(["beforeunload","unload","pagehide"],e,t)}function addPageHideEventListener(e,t){var n=!1;return t&&-1!==HelperFuncs_arrIndexOf(t,ye)||(n=addEventHandler(ye,e)),t&&-1!==HelperFuncs_arrIndexOf(t,_e)||(n=addEventHandler(_e,(function _handlePageVisibility(t){var n=EnvUtils_getDocument();e&&n&&"hidden"===n.visibilityState&&e(t)}))||n),!n&&t&&(n=addPageHideEventListener(e)),n}function newId(e){void 0===e&&(e=22);for(var t=random32()>>>0,n=0,r="";r.length<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(random32()<<2&4294967295|3&t)>>>0,n=0);return r}function generateW3CId(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",r=0;r<4;r++)n+=t[15&(e=random32())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&random32())|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)}var Ie={_canUseCookies:void 0,isTypeof:function isTypeof(e,t){return typeof e===t},isUndefined,isNullOrUndefined,hasOwnProperty:HelperFuncs_hasOwnProperty,isFunction,isObject,isDate,isArray,isError,isString:HelperFuncs_isString,isNumber,isBoolean,toISOString,arrForEach,arrIndexOf:HelperFuncs_arrIndexOf,arrMap,arrReduce,strTrim,objCreate:objCreateFn,objKeys,objDefineAccessors,addEventHandler,dateNow,isIE,disableCookies,newGuid:function newGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(xe,(function(e){var t=0|function randomHexDigit(){return randomValue(15)}();return("x"===e?t:3&t|8).toString(16)}))},perfNow:function perfNow(){var e=getPerformance();return e&&e.now?e.now():dateNow()},newId,randomValue,random32,mwcRandomSeed:function mwcRandomSeed(e){e?_mwcSeed(e):_autoSeedMwc()},mwcRandom32,generateW3CId},xe=/[xy]/g;function _legacyCookieMgr(e,t){var n=_gblCookieMgr(e,t),r=Ie._canUseCookies;return null===Se&&(Se=[],ve=r,objDefineAccessors(Ie,"_canUseCookies",(function(){return ve}),(function(e){ve=e,arrForEach(Se,(function(t){t.setEnabled(e)}))}))),-1===HelperFuncs_arrIndexOf(Se,n)&&Se.push(n),isBoolean(r)&&n.setEnabled(r),isBoolean(ve)&&n.setEnabled(ve),n}function disableCookies(){_legacyCookieMgr().setEnabled(!1)}var Ce="AppInsightsPropertiesPlugin",be="AppInsightsChannelPlugin",Te="ApplicationInsightsAnalytics";function dataSanitizeKeyAndAddUniqueness(e,t,n){var r=t.length,i=dataSanitizeKey(e,t);if(i.length!==r){for(var a=0,o=i;void 0!==n[o];)a++,o=i.substring(0,147)+dsPadNumber(a);i=o}return i}function dataSanitizeKey(e,t){var n;return t&&(t=strTrim(t.toString())).length>150&&(n=t.substring(0,150),e&&e.throwInternal(C.WARNING,b.NameTooLong,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}function dataSanitizeString(e,t,n){var r;return void 0===n&&(n=1024),t&&(n=n||1024,(t=strTrim(t)).toString().length>n&&(r=t.toString().substring(0,n),e&&e.throwInternal(C.WARNING,b.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function dataSanitizeUrl(e,t){return dataSanitizeInput(e,t,2048,b.UrlTooLong)}function dataSanitizeMessage(e,t){var n;return t&&t.length>32768&&(n=t.substring(0,32768),e&&e.throwInternal(C.WARNING,b.MessageTruncated,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function dataSanitizeException(e,t){var n;if(t){var r=""+t;r.length>32768&&(n=r.substring(0,32768),e&&e.throwInternal(C.WARNING,b.ExceptionTruncated,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return n||t}function dataSanitizeProperties(e,t){if(t){var n={};objForEachKey(t,(function(t,r){if(isObject(r)&&hasJSON())try{r=getJSON().stringify(r)}catch(t){e&&e.throwInternal(C.WARNING,b.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:t},!0)}r=dataSanitizeString(e,r,8192),t=dataSanitizeKeyAndAddUniqueness(e,t,n),n[t]=r})),t=n}return t}function dataSanitizeMeasurements(e,t){if(t){var n={};objForEachKey(t,(function(t,r){t=dataSanitizeKeyAndAddUniqueness(e,t,n),n[t]=r})),t=n}return t}function dataSanitizeId(e,t){return t?dataSanitizeInput(e,t,128,b.IdTooLong).toString():t}function dataSanitizeInput(e,t,n,r){var i;return t&&(t=strTrim(t)).length>n&&(i=t.substring(0,n),e&&e.throwInternal(C.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),i||t}function dsPadNumber(e){var t="00"+e;return t.substr(t.length-3)}var we,Ee={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768,sanitizeKeyAndAddUniqueness:dataSanitizeKeyAndAddUniqueness,sanitizeKey:dataSanitizeKey,sanitizeString:dataSanitizeString,sanitizeUrl:dataSanitizeUrl,sanitizeMessage:dataSanitizeMessage,sanitizeException:dataSanitizeException,sanitizeProperties:dataSanitizeProperties,sanitizeMeasurements:dataSanitizeMeasurements,sanitizeId:dataSanitizeId,sanitizeInput:dataSanitizeInput,padNumber:dsPadNumber,trim:strTrim},Pe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Ne="sampleRate",De="ProcessLegacy",ke="http.method",Ae="https://dc.services.visualstudio.com",Fe="not_specified",Oe=function(){function TelemetryItemCreator(){}return TelemetryItemCreator.create=function(e,t,n,r,i,a){if(n=dataSanitizeString(r,n)||Fe,isNullOrUndefined(e)||isNullOrUndefined(t)||isNullOrUndefined(n))throw Error("Input doesn't contain all required fields");var o="";e.iKey&&(o=e.iKey,delete e.iKey);var s={name:n,time:toISOString(new Date),iKey:o,ext:a||{},tags:[],data:{},baseType:t,baseData:e};return isNullOrUndefined(i)||objForEachKey(i,(function(e,t){s.data[e]=t})),s},TelemetryItemCreator}(),Me=function Me(){this.ver=2,this.properties={},this.measurements={}},Ue=function(e){function Event(t,n,r,i){var a=e.call(this)||this;return a.aiDataContract={ver:1,name:1,properties:0,measurements:0},a.name=dataSanitizeString(t,n)||Fe,a.properties=dataSanitizeProperties(t,r),a.measurements=dataSanitizeMeasurements(t,i),a}return __extendsFn(Event,e),Event.envelopeType="Microsoft.ApplicationInsights.{0}.Event",Event.dataType="EventData",Event}(Me),Re=function(e){function Trace(t,n,r,i,a){var o=e.call(this)||this;return o.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},n=n||Fe,o.message=dataSanitizeMessage(t,n),o.properties=dataSanitizeProperties(t,i),o.measurements=dataSanitizeMeasurements(t,a),r&&(o.severityLevel=r),o}return __extendsFn(Trace,e),Trace.envelopeType="Microsoft.ApplicationInsights.{0}.Message",Trace.dataType="MessageData",Trace}((function MessageData(){this.ver=2,this.properties={},this.measurements={}})),Le=function Le(){this.ver=2,this.metrics=[],this.properties={},this.measurements={}};!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(we||(we={}));var je=function(e){function DataPoint(){var t=null!==e&&e.apply(this,arguments)||this;return t.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},t}return __extendsFn(DataPoint,e),DataPoint}((function DataPoint(){this.kind=we.Measurement})),Ve=function(e){function Metric(t,n,r,i,a,o,s,c,l){var u=e.call(this)||this;u.aiDataContract={ver:1,metrics:1,properties:0};var d=new je;return d.count=i>0?i:void 0,d.max=isNaN(o)||null===o?void 0:o,d.min=isNaN(a)||null===a?void 0:a,d.name=dataSanitizeString(t,n)||Fe,d.value=r,d.stdDev=isNaN(s)||null===s?void 0:s,u.metrics=[d],u.properties=dataSanitizeProperties(t,c),u.measurements=dataSanitizeMeasurements(t,l),u}return __extendsFn(Metric,e),Metric.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",Metric.dataType="MetricData",Metric}(Le),Be=function(e){function PageViewData(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return __extendsFn(PageViewData,e),PageViewData}(Me);function stringToBoolOrDefault(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString().toLowerCase()}function msToTimeSpan(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24,a=Math.floor(e/864e5);return t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r,(a>0?a+".":"")+(i=i.length<2?"0"+i:i)+":"+r+":"+n+"."+t}function getExtensionByName(e,t){var n=null;return arrForEach(e,(function(e){if(e.identifier===t)return n=e,-1})),n}function isCrossOriginError(e,t,n,r,i){return!i&&HelperFuncs_isString(e)&&("Script error."===e||"Script error"===e)}var ze=function(e){function PageView(t,n,r,i,a,o,s){var c=e.call(this)||this;return c.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},c.id=dataSanitizeId(t,s),c.url=dataSanitizeUrl(t,r),c.name=dataSanitizeString(t,n)||Fe,isNaN(i)||(c.duration=msToTimeSpan(i)),c.properties=dataSanitizeProperties(t,a),c.measurements=dataSanitizeMeasurements(t,o),c}return __extendsFn(PageView,e),PageView.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",PageView.dataType="PageviewData",PageView}(Be),He=function(e){function PageViewPerformance(t,n,r,i,a,o,s){var c=e.call(this)||this;return c.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0},c.url=dataSanitizeUrl(t,r),c.name=dataSanitizeString(t,n)||Fe,c.properties=dataSanitizeProperties(t,a),c.measurements=dataSanitizeMeasurements(t,o),s&&(c.domProcessing=s.domProcessing,c.duration=s.duration,c.networkConnect=s.networkConnect,c.perfTotal=s.perfTotal,c.receivedResponse=s.receivedResponse,c.sentRequest=s.sentRequest),c}return __extendsFn(PageViewPerformance,e),PageViewPerformance.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",PageViewPerformance.dataType="PageviewPerformanceData",PageViewPerformance}(function(e){function PageViewPerfData(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return __extendsFn(PageViewPerfData,e),PageViewPerfData}(Be)),qe=function qe(){},Ge=function Ge(){this.hasFullStack=!0,this.parsedStack=[]};function _stringify(e,t){var n=e;return n&&!HelperFuncs_isString(n)&&(JSON&&JSON.stringify?(n=JSON.stringify(e),!t||n&&"{}"!==n||(n=isFunction(e.toString)?e.toString():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function _formatMessage(e,t){var n=e;return e&&(n&&!HelperFuncs_isString(n)&&(n=e.message||e.description||n),n&&!HelperFuncs_isString(n)&&(n=_stringify(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(n||"").indexOf(t)&&(n=t+": "+n),n||""}function _isStackDetails(e){return e&&e.src&&HelperFuncs_isString(e.src)&&e.obj&&isArray(e.obj)}function _convertStackObj(e){var t=e||"";HelperFuncs_isString(t)||(t=HelperFuncs_isString(t.stack)?t.stack:""+t);var n=t.split("\n");return{src:t,obj:n}}function _getStackFromErrorObj(e){var t=null;if(e)try{if(e.stack)t=_convertStackObj(e.stack);else if(e.error&&e.error.stack)t=_convertStackObj(e.error.stack);else if(e.exception&&e.exception.stack)t=_convertStackObj(e.exception.stack);else if(_isStackDetails(e))t=e;else if(_isStackDetails(e.stackDetails))t=e.stackDetails;else if(window&&window.opera&&e.message)t=function _getOperaStack(e){for(var t=[],n=e.split("\n"),r=0;r<n.length;r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),t.push(i)}return{src:e,obj:t}}(e.message);else if(HelperFuncs_isString(e))t=_convertStackObj(e);else{var n=e.message||e.description||"";HelperFuncs_isString(e.errorSrc)&&(n&&(n+="\n"),n+=" from "+e.errorSrc),n&&(t=_convertStackObj(n))}}catch(e){t=_convertStackObj(e)}return t||{src:"",obj:null}}function _getErrorType(e){var t="";if(e&&!(t=e.typeName||e.name||""))try{var n=/function (.{1,200})\(/.exec(e.constructor.toString());t=n&&n.length>1?n[1]:""}catch(e){}return t}function _formatErrorCode(e){if(e)try{if(!HelperFuncs_isString(e)){var t=_getErrorType(e),n=_stringify(e,!1);return n&&"{}"!==n||(e.error&&(t=_getErrorType(e=e.error)),n=_stringify(e,!0)),0!==n.indexOf(t)&&"String"!==t?t+":"+n:n}}catch(e){}return""+(e||"")}var Ke,We,Xe,Je=function(e){function Exception(t,n,r,i,a,o){var s=e.call(this)||this;return s.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0},!function _isExceptionInternal(e){try{if(isObject(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch(e){}return!1}(n)?(r||(r={}),s.exceptions=[new Ye(t,n,r)],s.properties=dataSanitizeProperties(t,r),s.measurements=dataSanitizeMeasurements(t,i),a&&(s.severityLevel=a),o&&(s.id=o)):(s.exceptions=n.exceptions,s.properties=n.properties,s.measurements=n.measurements,n.severityLevel&&(s.severityLevel=n.severityLevel),n.id&&(s.id=n.id),n.problemGroup&&(s.problemGroup=n.problemGroup),s.ver=2,isNullOrUndefined(n.isManual)||(s.isManual=n.isManual)),s}return __extendsFn(Exception,e),Exception.CreateAutoException=function(e,t,n,r,i,a,o,s){var c=_getErrorType(i||a||e);return{message:_formatMessage(e,c),url:t,lineNumber:n,columnNumber:r,error:_formatErrorCode(i||a||e),evt:_formatErrorCode(a||e),typeName:c,stackDetails:_getStackFromErrorObj(o||i||a),errorSrc:s}},Exception.CreateFromInterface=function(e,t,n,r){var i=t.exceptions&&arrMap(t.exceptions,(function(t){return Ye.CreateFromInterface(e,t)}));return new Exception(e,p(p({},t),{exceptions:i}),n,r)},Exception.prototype.toInterface=function(){var e=this,t=e.exceptions,n=e.properties,r=e.measurements,i=e.severityLevel,a=e.problemGroup,o=e.id,s=e.isManual;return{ver:"4.0",exceptions:t instanceof Array&&arrMap(t,(function(e){return e.toInterface()}))||void 0,severityLevel:i,properties:n,measurements:r,problemGroup:a,id:o,isManual:s}},Exception.CreateSimpleException=function(e,t,n,r,i,a){return{exceptions:[{hasFullStack:!0,message:e,stack:i,typeName:t}]}},Exception.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",Exception.dataType="ExceptionData",Exception.formatError=_formatErrorCode,Exception}((function ExceptionData(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={}})),Ye=function(e){function _ExceptionDetails(t,n,r){var i=e.call(this)||this;if(i.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2},function _isExceptionDetailsInternal(e){try{if(isObject(e))return"hasFullStack"in e&&"typeName"in e}catch(e){}return!1}(n))i.typeName=n.typeName,i.message=n.message,i.stack=n.stack,i.parsedStack=n.parsedStack,i.hasFullStack=n.hasFullStack;else{var a=n,o=a&&a.evt;isError(a)||(a=a.error||o||a),i.typeName=dataSanitizeString(t,_getErrorType(a))||Fe,i.message=dataSanitizeMessage(t,_formatMessage(n||a,i.typeName))||Fe;var s=n.stackDetails||_getStackFromErrorObj(n);i.parsedStack=function _parseStack(e){var t,n=e.obj;if(n&&n.length>0){t=[];var r=0,i=0;if(arrForEach(n,(function(e){var n=e.toString();if(Qe.regex.test(n)){var a=new Qe(n,r++);i+=a.sizeInBytes,t.push(a)}})),i>32768)for(var a=0,o=t.length-1,s=0,c=a,l=o;a<o;){if((s+=t[a].sizeInBytes+t[o].sizeInBytes)>32768){var u=l-c+1;t.splice(c,u);break}c=a,l=o,a++,o--}}return t}(s),i.stack=dataSanitizeException(t,function _formatStackTrace(e){var t="";return e&&(e.obj?arrForEach(e.obj,(function(e){t+=e+"\n"})):t=e.src||""),t}(s)),i.hasFullStack=isArray(i.parsedStack)&&i.parsedStack.length>0,r&&(r.typeName=r.typeName||i.typeName)}return i}return __extendsFn(_ExceptionDetails,e),_ExceptionDetails.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&arrMap(this.parsedStack,(function(e){return e.toInterface()}));return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this.stack,parsedStack:e||void 0}},_ExceptionDetails.CreateFromInterface=function(e,t){var n=t.parsedStack instanceof Array&&arrMap(t.parsedStack,(function(e){return Qe.CreateFromInterface(e)}))||t.parsedStack;return new _ExceptionDetails(e,p(p({},t),{parsedStack:n}))},_ExceptionDetails}(Ge),Qe=function(e){function _StackFrame(t,n){var r=e.call(this)||this;if(r.sizeInBytes=0,r.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0},"string"==typeof t){var i=t;r.level=n,r.method="<no_method>",r.assembly=strTrim(i),r.fileName="",r.line=0;var a=i.match(_StackFrame.regex);a&&a.length>=5&&(r.method=strTrim(a[2])||r.method,r.fileName=strTrim(a[4]),r.line=parseInt(a[5])||0)}else r.level=t.level,r.method=t.method,r.assembly=t.assembly,r.fileName=t.fileName,r.line=t.line,r.sizeInBytes=0;return r.sizeInBytes+=r.method.length,r.sizeInBytes+=r.fileName.length,r.sizeInBytes+=r.assembly.length,r.sizeInBytes+=_StackFrame.baseSize,r.sizeInBytes+=r.level.toString().length,r.sizeInBytes+=r.line.toString().length,r}return __extendsFn(_StackFrame,e),_StackFrame.CreateFromInterface=function(e){return new _StackFrame(e,null)},_StackFrame.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},_StackFrame.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,_StackFrame.baseSize=58,_StackFrame}(qe);!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(Ke||(Ke={})),function(e){e[e.LocalStorage=0]="LocalStorage",e[e.SessionStorage=1]="SessionStorage"}(We||(We={})),function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C",e[e.W3C=2]="W3C"}(Xe||(Xe={}));var Ze=void 0,$e=void 0;function _getLocalStorageObject(){return utlCanUseLocalStorage()?_getVerifiedStorageObject(We.LocalStorage):null}function _getVerifiedStorageObject(e){try{if(isNullOrUndefined(getGlobal()))return null;var t=new Date,n=getGlobalInst(e===We.LocalStorage?"localStorage":"sessionStorage");n.setItem(t.toString(),t.toString());var r=n.getItem(t.toString())!==t.toString();if(n.removeItem(t.toString()),!r)return n}catch(e){}return null}function _getSessionStorageObject(){return utlCanUseSessionStorage()?_getVerifiedStorageObject(We.SessionStorage):null}function utlDisableStorage(){Ze=!1,$e=!1}function utlCanUseLocalStorage(){return void 0===Ze&&(Ze=!!_getVerifiedStorageObject(We.LocalStorage)),Ze}function utlGetLocalStorage(e,t){var n=_getLocalStorageObject();if(null!==n)try{return n.getItem(t)}catch(t){Ze=!1,e.throwInternal(C.WARNING,b.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+getExceptionName(t),{exception:dumpObj(t)})}return null}function utlSetLocalStorage(e,t,n){var r=_getLocalStorageObject();if(null!==r)try{return r.setItem(t,n),!0}catch(t){Ze=!1,e.throwInternal(C.WARNING,b.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+getExceptionName(t),{exception:dumpObj(t)})}return!1}function utlRemoveStorage(e,t){var n=_getLocalStorageObject();if(null!==n)try{return n.removeItem(t),!0}catch(t){Ze=!1,e.throwInternal(C.WARNING,b.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+getExceptionName(t),{exception:dumpObj(t)})}return!1}function utlCanUseSessionStorage(){return void 0===$e&&($e=!!_getVerifiedStorageObject(We.SessionStorage)),$e}function utlGetSessionStorage(e,t){var n=_getSessionStorageObject();if(null!==n)try{return n.getItem(t)}catch(t){$e=!1,e.throwInternal(C.WARNING,b.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+getExceptionName(t),{exception:dumpObj(t)})}return null}function utlSetSessionStorage(e,t,n){var r=_getSessionStorageObject();if(null!==r)try{return r.setItem(t,n),!0}catch(t){$e=!1,e.throwInternal(C.WARNING,b.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+getExceptionName(t),{exception:dumpObj(t)})}return!1}function utlRemoveSessionStorage(e,t){var n=_getSessionStorageObject();if(null!==n)try{return n.removeItem(t),!0}catch(t){$e=!1,e.throwInternal(C.WARNING,b.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+getExceptionName(t),{exception:dumpObj(t)})}return!1}function createDomEvent(e){var t=null;if(isFunction(Event))t=new Event(e);else{var n=EnvUtils_getDocument();n&&n.createEvent&&(t=n.createEvent("Event")).initEvent(e,!0,!0)}return t}var et={requestContextHeader:"Request-Context",requestContextTargetKey:"appId",requestContextAppIdFormat:"appId=cid-v1:",requestIdHeader:"Request-Id",traceParentHeader:"traceparent",traceStateHeader:"tracestate",sdkContextHeader:"Sdk-Context",sdkContextHeaderAppIdRequest:"appId",requestContextHeaderLowerCase:"request-context"},tt=EnvUtils_getDocument()||{},nt=0,rt=[null,null,null,null,null];function urlParseUrl(e){var t=nt,n=rt,r=n[t];return tt.createElement?n[t]||(r=n[t]=tt.createElement("a")):r={host:urlParseHost(e,!0)},r.href=e,++t>=n.length&&(t=0),nt=t,r}function urlGetAbsoluteUrl(e){var t,n=urlParseUrl(e);return n&&(t=n.href),t}function urlGetCompleteUrl(e,t){return e?e.toUpperCase()+" "+t:t}function urlParseHost(e,t){var n=urlParseFullHost(e,t)||"";if(n){var r=n.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i);if(null!=r&&r.length>3&&HelperFuncs_isString(r[2])&&r[2].length>0)return r[2]+(r[3]||"")}return n}function urlParseFullHost(e,t){var n=null;if(e){var r=e.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i);if(null!=r&&r.length>2&&HelperFuncs_isString(r[2])&&r[2].length>0&&(n=r[2]||"",t&&r.length>2)){var i=(r[1]||"").toLowerCase(),a=r[3]||"";("http"===i&&":80"===a||"https"===i&&":443"===a)&&(a=""),n+=a}}return n}var it=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"];function isInternalApplicationInsightsEndpoint(e){return-1!==it.indexOf(e.toLowerCase())}var at={NotSpecified:Fe,createDomEvent,disableStorage:utlDisableStorage,isInternalApplicationInsightsEndpoint,canUseLocalStorage:utlCanUseLocalStorage,getStorage:utlGetLocalStorage,setStorage:utlSetLocalStorage,removeStorage:utlRemoveStorage,canUseSessionStorage:utlCanUseSessionStorage,getSessionStorageKeys:function utlGetSessionStorageKeys(){var e=[];return utlCanUseSessionStorage()&&objForEachKey(getGlobalInst("sessionStorage"),(function(t){e.push(t)})),e},getSessionStorage:utlGetSessionStorage,setSessionStorage:utlSetSessionStorage,removeSessionStorage:utlRemoveSessionStorage,disableCookies,canUseCookies:function canUseCookies(e){return _legacyCookieMgr(null,e).isEnabled()},disallowsSameSiteNone:uaDisallowsSameSiteNone,setCookie:function setCookie(e,t,n,r){_legacyCookieMgr(null,e).set(t,n,null,r)},stringToBoolOrDefault,getCookie:function getCookie(e,t){return _legacyCookieMgr(null,e).get(t)},deleteCookie:function deleteCookie(e,t){return _legacyCookieMgr(null,e).del(t)},trim:strTrim,newId,random32:function(){return random32(!0)},generateW3CId,isArray,isError,isDate,toISOStringForIE8:toISOString,getIEVersion,msToTimeSpan,isCrossOriginError,dump:dumpObj,getExceptionName,addEventHandler:attachEvent,IsBeaconApiSupported:isBeaconsSupported,getExtension:getExtensionByName},ot={parseUrl:urlParseUrl,getAbsoluteUrl:urlGetAbsoluteUrl,getPathName:function urlGetPathName(e){var t,n=urlParseUrl(e);return n&&(t=n.pathname),t},getCompleteUrl:urlGetCompleteUrl,parseHost:urlParseHost,parseFullHost:urlParseFullHost},st={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e.correlationHeaderExcludePatterns)for(var r=0;r<e.correlationHeaderExcludePatterns.length;r++)if(e.correlationHeaderExcludePatterns[r].test(t))return!1;var i=urlParseUrl(t).host.toLowerCase();if(!i||-1===i.indexOf(":443")&&-1===i.indexOf(":80")||(i=(urlParseFullHost(t,!0)||"").toLowerCase()),(!e||!e.enableCorsCorrelation)&&i&&i!==n)return!1;var a,o=e&&e.correlationHeaderDomains;if(o&&(arrForEach(o,(function(e){var t=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));a=a||t.test(i)})),!a))return!1;var s=e&&e.correlationHeaderExcludedDomains;if(!s||0===s.length)return!0;for(r=0;r<s.length;r++){if(new RegExp(s[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(i))return!1}return i&&i.length>0},getCorrelationContext:function(e){if(e){var t=st.getCorrelationContextValue(e,et.requestContextTargetKey);if(t&&t!==st.correlationIdPrefix)return t}},getCorrelationContextValue:function(e,t){if(e)for(var n=e.split(","),r=0;r<n.length;++r){var i=n[r].split("=");if(2===i.length&&i[0]===t)return i[1]}}};function dateTimeUtilsNow(){var e=getPerformance();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return dateNow()}function dateTimeUtilsDuration(e,t){var n=null;return 0===e||0===t||isNullOrUndefined(e)||isNullOrUndefined(t)||(n=t-e),n}var ct={Now:dateTimeUtilsNow,GetDuration:dateTimeUtilsDuration},lt=function(e){function RemoteDependencyData(t,n,r,i,a,o,s,c,l,u,d,f){void 0===l&&(l="Ajax");var p=e.call(this)||this;p.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0},p.id=n,p.duration=msToTimeSpan(a),p.success=o,p.resultCode=s+"",p.type=dataSanitizeString(t,l);var g=function AjaxHelperParseDependencyPath(e,t,n,r){var i,a=r,o=r;if(t&&t.length>0){var s=urlParseUrl(t);if(i=s.host,!a)if(null!=s.pathname){var c=0===s.pathname.length?"/":s.pathname;"/"!==c.charAt(0)&&(c="/"+c),o=s.pathname,a=dataSanitizeString(e,n?n+" "+c:c)}else a=dataSanitizeString(e,t)}else i=r,a=r;return{target:i,name:a,data:o}}(t,r,c,i);return p.data=dataSanitizeUrl(t,i)||g.data,p.target=dataSanitizeString(t,g.target),u&&(p.target="".concat(p.target," | ").concat(u)),p.name=dataSanitizeString(t,g.name),p.properties=dataSanitizeProperties(t,d),p.measurements=dataSanitizeMeasurements(t,f),p}return __extendsFn(RemoteDependencyData,e),RemoteDependencyData.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",RemoteDependencyData.dataType="RemoteDependencyData",RemoteDependencyData}((function RemoteDependencyData(){this.ver=2,this.success=!0,this.properties={},this.measurements={}})),ut=function PageViewManager(e,t,n,r){x(PageViewManager,this,(function(i){var a,o=null,s=[],c=!1;function _flushChannels(){n&&arrForEach(n.getTransmissionControls(),(function(e){arrForEach(e,(function(e){return e.flush(!0)}))}))}n&&(a=n.logger),i.trackPageView=function(n,i){var l=n.name;if(isNullOrUndefined(l)||"string"!=typeof l){var u=EnvUtils_getDocument();l=n.name=u&&u.title||""}var d=n.uri;if(isNullOrUndefined(d)||"string"!=typeof d){var f=getLocation();d=n.uri=f&&f.href||""}if(!r.isPerformanceTimingSupported())return e.sendPageViewInternal(n,i),_flushChannels(),void a.throwInternal(C.WARNING,b.NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var p,g,h=!1,m=r.getPerformanceTiming().navigationStart;m>0&&(p=dateTimeUtilsDuration(m,+new Date),r.shouldCollectDuration(p)||(p=void 0)),isNullOrUndefined(i)||isNullOrUndefined(i.duration)||(g=i.duration),!t&&isNaN(g)||(isNaN(g)&&(i||(i={}),i.duration=p),e.sendPageViewInternal(n,i),_flushChannels(),h=!0),i||(i={}),function _addQueue(e){s.push(e),o||(o=setInterval((function(){var e=s.slice(0),t=!1;s=[],arrForEach(e,(function(e){e()?t=!0:s.push(e)})),0===s.length&&(clearInterval(o),o=null),t&&_flushChannels()}),100))}((function(){var t=!1;try{if(r.isPerformanceTimingDataReady()){t=!0;var o={name:l,uri:d};r.populatePageViewPerformanceEvent(o),o.isValid||h?(h||(i.duration=o.durationMs,e.sendPageViewInternal(n,i)),c||(e.sendPageViewPerformanceInternal(o,i),c=!0)):(i.duration=p,e.sendPageViewInternal(n,i))}else m>0&&dateTimeUtilsDuration(m,+new Date)>6e4&&(t=!0,h||(i.duration=6e4,e.sendPageViewInternal(n,i)))}catch(e){a.throwInternal(C.CRITICAL,b.TrackPVFailedCalc,"trackPageView failed on page load calculation: "+getExceptionName(e),{exception:dumpObj(e)})}return t}))}}))},dt=function(){function PageVisitTimeManager(e,t){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=t,this._logger=e}return PageVisitTimeManager.prototype.trackPreviousPageVisit=function(e,t){try{var n=this.restartPageVisitTimer(e,t);n&&this.pageVisitTimeTrackingHandler(n.pageName,n.pageUrl,n.pageVisitTime)}catch(e){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+dumpObj(e))}},PageVisitTimeManager.prototype.restartPageVisitTimer=function(e,t){try{var n=this.stopPageVisitTimer();return this.startPageVisitTimer(e,t),n}catch(e){return this._logger.warnToConsole("Call to restart failed: "+dumpObj(e)),null}},PageVisitTimeManager.prototype.startPageVisitTimer=function(e,t){try{if(utlCanUseSessionStorage()){null!=utlGetSessionStorage(this._logger,this.prevPageVisitDataKeyName)&&throwError("Cannot call startPageVisit consecutively without first calling stopPageVisit");var n=new ft(e,t),r=getJSON().stringify(n);utlSetSessionStorage(this._logger,this.prevPageVisitDataKeyName,r)}}catch(e){this._logger.warnToConsole("Call to start failed: "+dumpObj(e))}},PageVisitTimeManager.prototype.stopPageVisitTimer=function(){try{if(utlCanUseSessionStorage()){var e=dateNow(),t=utlGetSessionStorage(this._logger,this.prevPageVisitDataKeyName);if(t&&hasJSON()){var n=getJSON().parse(t);return n.pageVisitTime=e-n.pageVisitStartTime,utlRemoveSessionStorage(this._logger,this.prevPageVisitDataKeyName),n}return null}return null}catch(e){return this._logger.warnToConsole("Stop page visit timer failed: "+dumpObj(e)),null}},PageVisitTimeManager}(),ft=function ft(e,t){this.pageVisitStartTime=dateNow(),this.pageName=e,this.pageUrl=t},pt=function(){function PageViewPerformanceManager(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}return PageViewPerformanceManager.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var t=this.getPerformanceNavigationTiming(),n=this.getPerformanceTiming(),r=0,i=0,a=0,o=0,s=0;(t||n)&&(t?(r=t.duration,i=0===t.startTime?t.connectEnd:dateTimeUtilsDuration(t.startTime,t.connectEnd),a=dateTimeUtilsDuration(t.requestStart,t.responseStart),o=dateTimeUtilsDuration(t.responseStart,t.responseEnd),s=dateTimeUtilsDuration(t.responseEnd,t.loadEventEnd)):(r=dateTimeUtilsDuration(n.navigationStart,n.loadEventEnd),i=dateTimeUtilsDuration(n.navigationStart,n.connectEnd),a=dateTimeUtilsDuration(n.requestStart,n.responseStart),o=dateTimeUtilsDuration(n.responseStart,n.responseEnd),s=dateTimeUtilsDuration(n.responseEnd,n.loadEventEnd)),0===r?this._logger.throwInternal(C.WARNING,b.ErrorPVCalc,"error calculating page view performance.",{total:r,network:i,request:a,response:o,dom:s}):this.shouldCollectDuration(r,i,a,o,s)?r<Math.floor(i)+Math.floor(a)+Math.floor(o)+Math.floor(s)?this._logger.throwInternal(C.WARNING,b.ClientPerformanceMathError,"client performance math error.",{total:r,network:i,request:a,response:o,dom:s}):(e.durationMs=r,e.perfTotal=e.duration=msToTimeSpan(r),e.networkConnect=msToTimeSpan(i),e.sentRequest=msToTimeSpan(a),e.receivedResponse=msToTimeSpan(o),e.domProcessing=msToTimeSpan(s),e.isValid=!0):this._logger.throwInternal(C.WARNING,b.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:r,network:i,request:a,response:o,dom:s}))},PageViewPerformanceManager.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?getPerformance().timing:null},PageViewPerformanceManager.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?getPerformance().getEntriesByType("navigation")[0]:null},PageViewPerformanceManager.prototype.isPerformanceNavigationTimingSupported=function(){var e=getPerformance();return e&&e.getEntriesByType&&e.getEntriesByType("navigation").length>0},PageViewPerformanceManager.prototype.isPerformanceTimingSupported=function(){var e=getPerformance();return e&&e.timing},PageViewPerformanceManager.prototype.isPerformanceTimingDataReady=function(){var e=getPerformance(),t=e?e.timing:0;return t&&t.domainLookupStart>0&&t.navigationStart>0&&t.responseStart>0&&t.requestStart>0&&t.loadEventEnd>0&&t.responseEnd>0&&t.connectEnd>0&&t.domLoading>0},PageViewPerformanceManager.prototype.shouldCollectDuration=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=getNavigator()||{},r=["googlebot","adsbot-google","apis-google","mediapartners-google"],i=n.userAgent,a=!1;if(i)for(var o=0;o<r.length;o++)a=a||-1!==i.toLowerCase().indexOf(r[o]);if(a)return!1;for(o=0;o<e.length;o++)if(e[o]<0||e[o]>=this.MAX_DURATION_ALLOWED)return!1;return!0},PageViewPerformanceManager}();function _dispatchEvent(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}var gt=function(e){function ApplicationInsights(){var t,n,r,i=e.call(this)||this;i.identifier=Te,i.priority=180,i.autoRoutePVDelay=500;var a,o;return x(ApplicationInsights,i,(function(e,s){var c=getLocation(!0);a=c&&c.href||"",e.getCookieMgr=function(){return safeGetCookieMgr(e.core)},e.processTelemetry=function(t,n){doPerf(e.core,(function(){return e.identifier+":processTelemetry"}),(function(){var r=!1,i=e._telemetryInitializers.length;n=e._getTelCtx(n);for(var a=0;a<i;++a){var o=e._telemetryInitializers[a];if(o)try{if(!1===o.apply(null,[t])){r=!0;break}}catch(e){n.diagLog().throwInternal(C.CRITICAL,b.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+getExceptionName(e),{exception:dumpObj(e)},!0)}}r||e.processNext(t,n)}),(function(){return{item:t}}),!t.sync)},e.trackEvent=function(t,n){try{var r=Oe.create(t,Ue.dataType,Ue.envelopeType,e.diagLog(),n);e.core.track(r)}catch(t){e.diagLog().throwInternal(C.WARNING,b.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+getExceptionName(t),{exception:dumpObj(t)})}},e.startTrackEvent=function(n){try{t.start(n)}catch(t){e.diagLog().throwInternal(C.CRITICAL,b.StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+getExceptionName(t),{exception:dumpObj(t)})}},e.stopTrackEvent=function(n,r,i){try{t.stop(n,void 0,r)}catch(t){e.diagLog().throwInternal(C.CRITICAL,b.StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+getExceptionName(t),{exception:dumpObj(t)})}},e.trackTrace=function(t,n){try{var r=Oe.create(t,Re.dataType,Re.envelopeType,e.diagLog(),n);e.core.track(r)}catch(t){e.diagLog().throwInternal(C.WARNING,b.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+getExceptionName(t),{exception:dumpObj(t)})}},e.trackMetric=function(t,n){try{var r=Oe.create(t,Ve.dataType,Ve.envelopeType,e.diagLog(),n);e.core.track(r)}catch(t){e.diagLog().throwInternal(C.CRITICAL,b.TrackMetricFailed,"trackMetric failed, metric will not be collected: "+getExceptionName(t),{exception:dumpObj(t)})}},e.trackPageView=function(t,n){try{var r=t||{};e._pageViewManager.trackPageView(r,p(p(p({},r.properties),r.measurements),n)),e.config.autoTrackPageVisitTime&&e._pageVisitTimeManager.trackPreviousPageVisit(r.name,r.uri)}catch(t){e.diagLog().throwInternal(C.CRITICAL,b.TrackPVFailed,"trackPageView failed, page view will not be collected: "+getExceptionName(t),{exception:dumpObj(t)})}},e.sendPageViewInternal=function(t,n,r){var i=EnvUtils_getDocument();i&&(t.refUri=void 0===t.refUri?i.referrer:t.refUri);var a=Oe.create(t,ze.dataType,ze.envelopeType,e.diagLog(),n,r);e.core.track(a),0},e.sendPageViewPerformanceInternal=function(t,n,r){var i=Oe.create(t,He.dataType,He.envelopeType,e.diagLog(),n,r);e.core.track(i)},e.trackPageViewPerformance=function(t,n){try{e._pageViewPerformanceManager.populatePageViewPerformanceEvent(t),e.sendPageViewPerformanceInternal(t,n)}catch(t){e.diagLog().throwInternal(C.CRITICAL,b.TrackPVFailed,"trackPageViewPerformance failed, page view will not be collected: "+getExceptionName(t),{exception:dumpObj(t)})}},e.startTrackPage=function(t){try{if("string"!=typeof t){var r=EnvUtils_getDocument();t=r&&r.title||""}n.start(t)}catch(t){e.diagLog().throwInternal(C.CRITICAL,b.StartTrackFailed,"startTrackPage failed, page view may not be collected: "+getExceptionName(t),{exception:dumpObj(t)})}},e.stopTrackPage=function(t,r,i,a){try{if("string"!=typeof t){var o=EnvUtils_getDocument();t=o&&o.title||""}if("string"!=typeof r){var s=getLocation();r=s&&s.href||""}n.stop(t,r,i,a),e.config.autoTrackPageVisitTime&&e._pageVisitTimeManager.trackPreviousPageVisit(t,r)}catch(t){e.diagLog().throwInternal(C.CRITICAL,b.StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+getExceptionName(t),{exception:dumpObj(t)})}},e.sendExceptionInternal=function(t,n,r){var i=t.exception||t.error||new Error(Fe),a=new Je(e.diagLog(),i,t.properties||n,t.measurements,t.severityLevel,t.id).toInterface(),o=Oe.create(a,Je.dataType,Je.envelopeType,e.diagLog(),n,r);e.core.track(o)},e.trackException=function(t,n){try{e.sendExceptionInternal(t,n)}catch(t){e.diagLog().throwInternal(C.CRITICAL,b.TrackExceptionFailed,"trackException failed, exception will not be collected: "+getExceptionName(t),{exception:dumpObj(t)})}},e._onerror=function(t){var n=t&&t.error,r=t&&t.evt;try{if(!r){var i=getWindow();i&&(r=i.event)}var a=t&&t.url||(EnvUtils_getDocument()||{}).URL,o=t.errorSrc||"window.onerror@"+a+":"+(t.lineNumber||0)+":"+(t.columnNumber||0),s={errorSrc:o,url:a,lineNumber:t.lineNumber||0,columnNumber:t.columnNumber||0,message:t.message};isCrossOriginError(t.message,t.url,t.lineNumber,t.columnNumber,t.error)?function _sendCORSException(t,n){var r=Oe.create(t,Je.dataType,Je.envelopeType,e.diagLog(),n);e.core.track(r)}(Je.CreateAutoException("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",a,t.lineNumber||0,t.columnNumber||0,n,r,null,o),s):(t.errorSrc||(t.errorSrc=o),e.trackException({exception:t,severityLevel:Ke.Error},s))}catch(t){var c=n?n.name+", "+n.message:"null";e.diagLog().throwInternal(C.CRITICAL,b.ExceptionWhileLoggingError,"_onError threw exception while logging error, error will not be collected: "+getExceptionName(t),{exception:dumpObj(t),errorString:c})}},e.addTelemetryInitializer=function(t){e._telemetryInitializers.push(t)},e.initialize=function(c,l,u,d){if(!e.isInitialized()){if(isNullOrUndefined(l))throw Error("Error initializing");s.initialize(c,l,u,d),e.setInitialized(!1);var f=e._getTelCtx(),p=e.identifier;e.config=f.getExtCfg(p);var g=ApplicationInsights.getDefaultConfig(c);void 0!==g&&objForEachKey(g,(function(t,n){e.config[t]=f.getConfig(p,t,n),void 0===e.config[t]&&(e.config[t]=n)})),e.config.isStorageUseDisabled&&utlDisableStorage();var h={instrumentationKey:function(){return c.instrumentationKey},accountId:function(){return e.config.accountId||c.accountId},sessionRenewalMs:function(){return e.config.sessionRenewalMs||c.sessionRenewalMs},sessionExpirationMs:function(){return e.config.sessionExpirationMs||c.sessionExpirationMs},sampleRate:function(){return e.config.samplingPercentage||c.samplingPercentage},sdkExtension:function(){return e.config.sdkExtension||c.sdkExtension},isBrowserLinkTrackingEnabled:function(){return e.config.isBrowserLinkTrackingEnabled||c.isBrowserLinkTrackingEnabled},appId:function(){return e.config.appId||c.appId}};e._pageViewPerformanceManager=new pt(e.core),e._pageViewManager=new ut(i,e.config.overridePageViewDuration,e.core,e._pageViewPerformanceManager),e._pageVisitTimeManager=new dt(e.diagLog(),(function(t,n,r){return function trackPageVisitTime(t,n,r){var i={PageName:t,PageUrl:n};e.trackMetric({name:"PageVisitTime",average:r,max:r,min:r,sampleCount:1},i)}(t,n,r)})),e._telemetryInitializers=e._telemetryInitializers||[],function _addDefaultTelemetryInitializers(t){if(!t.isBrowserLinkTrackingEnabled()){var n=["/browserLinkSignalR/","/__browserLink/"];!function _addTelemetryInitializer(t){e._telemetryInitializers.push(t)}((function(e){if(e.baseType===lt.dataType){var t=e.baseData;if(t)for(var r=0;r<n.length;r++)if(t.target&&t.target.indexOf(n[r])>=0)return!1}return!0}))}}(h),(t=new ht(e.diagLog(),"trackEvent")).action=function(t,n,r,i){i||(i={}),i.duration=r.toString(),e.trackEvent({name:t,properties:i})},(n=new ht(e.diagLog(),"trackPageView")).action=function(t,n,r,i,a){isNullOrUndefined(i)&&(i={}),i.duration=r.toString();var o={name:t,uri:n,properties:i,measurements:a};e.sendPageViewInternal(o,i)};var m,v=getWindow(),_=getHistory(),y=getLocation(!0),S=i;if(!1===e.config.disableExceptionTracking&&!e.config.autoExceptionInstrumented&&v){var I=v.onerror;v.onerror=function(e,t,n,r,i){var a=v.event,o=I&&I(e,t,n,r,i);return!0!==o&&S._onerror(Je.CreateAutoException(e,t,n,r,i,a)),o},e.config.autoExceptionInstrumented=!0}if(!1===e.config.disableExceptionTracking&&!0===e.config.enableUnhandledPromiseRejectionTracking&&!e.config.autoUnhandledPromiseInstrumented&&v){var x=v.onunhandledrejection;v.onunhandledrejection=function(e){var t=v.event,n=x&&x.call(v,e);return!0!==n&&S._onerror(Je.CreateAutoException(function _getReason(e){if(e&&e.reason){var t=e.reason;return!HelperFuncs_isString(t)&&isFunction(t.toString)?t.toString():dumpObj(t)}return e||""}(e),y?y.href:"",0,0,e,t)),n},e.config.autoUnhandledPromiseInstrumented=!0}if(!0===e.config.enableAutoRouteTracking&&_&&isFunction(_.pushState)&&isFunction(_.replaceState)&&v&&"undefined"!=typeof Event){var C=i;arrForEach(u,(function(e){e.identifier===Ce&&(r=e)})),_.pushState=(m=_.pushState,function pushState(){var e=m.apply(this,arguments);return _dispatchEvent(v,createDomEvent(C.config.namePrefix+"pushState")),_dispatchEvent(v,createDomEvent(C.config.namePrefix+"locationchange")),e}),_.replaceState=function(e){return function replaceState(){var t=e.apply(this,arguments);return _dispatchEvent(v,createDomEvent(C.config.namePrefix+"replaceState")),_dispatchEvent(v,createDomEvent(C.config.namePrefix+"locationchange")),t}}(_.replaceState),v.addEventListener&&(v.addEventListener(C.config.namePrefix+"popstate",(function(){_dispatchEvent(v,createDomEvent(C.config.namePrefix+"locationchange"))})),v.addEventListener(C.config.namePrefix+"locationchange",(function(){if(r&&r.context&&r.context.telemetryTrace){r.context.telemetryTrace.traceID=generateW3CId();var e="_unknown_";y&&y.pathname&&(e=y.pathname+(y.hash||"")),r.context.telemetryTrace.name=dataSanitizeString(C.diagLog(),e)}o?(a=o,o=y&&y.href||""):o=y&&y.href||"",setTimeout(function(e){C.trackPageView({refUri:e,properties:{duration:0}})}.bind(i,a),C.autoRoutePVDelay)})))}e.setInitialized(!0)}}})),i}return __extendsFn(ApplicationInsights,e),ApplicationInsights.getDefaultConfig=function(e){return e||(e={}),e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.disableExceptionTracking=stringToBoolOrDefault(e.disableExceptionTracking),e.autoTrackPageVisitTime=stringToBoolOrDefault(e.autoTrackPageVisitTime),e.overridePageViewDuration=stringToBoolOrDefault(e.overridePageViewDuration),e.enableUnhandledPromiseRejectionTracking=stringToBoolOrDefault(e.enableUnhandledPromiseRejectionTracking),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.isStorageUseDisabled=stringToBoolOrDefault(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=stringToBoolOrDefault(e.isBrowserLinkTrackingEnabled),e.enableAutoRouteTracking=stringToBoolOrDefault(e.enableAutoRouteTracking),e.namePrefix=e.namePrefix||"",e.enableDebug=stringToBoolOrDefault(e.enableDebug),e.disableFlushOnBeforeUnload=stringToBoolOrDefault(e.disableFlushOnBeforeUnload),e.disableFlushOnUnload=stringToBoolOrDefault(e.disableFlushOnUnload,e.disableFlushOnBeforeUnload),e},ApplicationInsights.Version="2.7.3",ApplicationInsights}(J),ht=function ht(e,t){var n=this,r={};n.start=function(t){void 0!==r[t]&&e.throwInternal(C.WARNING,b.StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:t,key:t},!0),r[t]=+new Date},n.stop=function(t,i,a,o){var s=r[t];if(isNaN(s))e.throwInternal(C.WARNING,b.StopCalledWithoutStart,"stop was called without a corresponding start.",{name:t,key:t},!0);else{var c=dateTimeUtilsDuration(s,+new Date);n.action(t,i,c,a,o)}delete r[t],r[t]=void 0}},mt=function BaseSendBuffer(e,t){var n=[],r=!1;this._get=function(){return n},this._set=function(e){return n=e},x(BaseSendBuffer,this,(function(i){i.enqueue=function(a){i.count()>=t.eventsLimitInMem()?r||(e.throwInternal(C.WARNING,b.InMemoryStorageBufferFull,"Maximum in-memory buffer size reached: "+i.count(),!0),r=!0):n.push(a)},i.count=function(){return n.length},i.size=function(){for(var e=n.length,r=0;r<n.length;r++)e+=n[r].length;return t.emitLineDelimitedJson()||(e+=2),e},i.clear=function(){n=[],r=!1},i.getItems=function(){return n.slice(0)},i.batchPayloads=function(e){return e&&e.length>0?t.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null}}))},vt=function(e){function ArraySendBuffer(t,n){var r=e.call(this,t,n)||this;return x(ArraySendBuffer,r,(function(e,t){e.markAsSent=function(e){t.clear()},e.clearSent=function(e){}})),r}return __extendsFn(ArraySendBuffer,e),ArraySendBuffer}(mt),_t=function(e){function SessionStorageSendBuffer(t,n){var r=e.call(this,t,n)||this,i=!1;return x(SessionStorageSendBuffer,r,(function(e,r){var a=_getBuffer(SessionStorageSendBuffer.BUFFER_KEY),o=_getBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY),s=e._set(a.concat(o));function _removePayloadsFromBuffer(e,t){var n=[];return arrForEach(t,(function(t){isFunction(t)||-1!==HelperFuncs_arrIndexOf(e,t)||n.push(t)})),n}function _getBuffer(e){var r=e;try{r=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+r:r;var i=utlGetSessionStorage(t,r);if(i){var a=getJSON().parse(i);if(HelperFuncs_isString(a)&&(a=getJSON().parse(a)),a&&isArray(a))return a}}catch(e){t.throwInternal(C.CRITICAL,b.FailedToRestoreStorageBuffer," storage key: "+r+", "+getExceptionName(e),{exception:dumpObj(e)})}return[]}function _setBuffer(e,r){var i=e;try{i=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+i:i;var a=JSON.stringify(r);utlSetSessionStorage(t,i,a)}catch(e){utlSetSessionStorage(t,i,JSON.stringify([])),t.throwInternal(C.WARNING,b.FailedToSetStorageBuffer," storage key: "+i+", "+getExceptionName(e)+". Buffer cleared",{exception:dumpObj(e)})}}s.length>SessionStorageSendBuffer.MAX_BUFFER_SIZE&&(s.length=SessionStorageSendBuffer.MAX_BUFFER_SIZE),_setBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY,[]),_setBuffer(SessionStorageSendBuffer.BUFFER_KEY,s),e.enqueue=function(n){e.count()>=SessionStorageSendBuffer.MAX_BUFFER_SIZE?i||(t.throwInternal(C.WARNING,b.SessionStorageBufferFull,"Maximum buffer size reached: "+e.count(),!0),i=!0):(r.enqueue(n),_setBuffer(SessionStorageSendBuffer.BUFFER_KEY,e._get()))},e.clear=function(){r.clear(),_setBuffer(SessionStorageSendBuffer.BUFFER_KEY,e._get()),_setBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY,[]),i=!1},e.markAsSent=function(n){_setBuffer(SessionStorageSendBuffer.BUFFER_KEY,e._set(_removePayloadsFromBuffer(n,e._get())));var r=_getBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY);r instanceof Array&&n instanceof Array&&((r=r.concat(n)).length>SessionStorageSendBuffer.MAX_BUFFER_SIZE&&(t.throwInternal(C.CRITICAL,b.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+r.length,!0),r.length=SessionStorageSendBuffer.MAX_BUFFER_SIZE),_setBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY,r))},e.clearSent=function(e){var t=_getBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY);t=_removePayloadsFromBuffer(e,t),_setBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY,t)}})),r}return __extendsFn(SessionStorageSendBuffer,e),SessionStorageSendBuffer.BUFFER_KEY="AI_buffer",SessionStorageSendBuffer.SENT_BUFFER_KEY="AI_sentBuffer",SessionStorageSendBuffer.MAX_BUFFER_SIZE=2e3,SessionStorageSendBuffer}(mt);function _aiNameFunc(e){var t="ai."+e+".";return function(e){return t+e}}var yt=_aiNameFunc("application"),St=_aiNameFunc("device"),It=_aiNameFunc("location"),xt=_aiNameFunc("operation"),Ct=_aiNameFunc("session"),bt=_aiNameFunc("user"),Tt=_aiNameFunc("cloud"),wt=_aiNameFunc("internal"),Et=function(e){function ContextTagKeys(){return e.call(this)||this}return __extendsFn(ContextTagKeys,e),ContextTagKeys}(function createClassFromInterface(e){return function class_1(){var t=this;e&&objForEachKey(e,(function(e,n){t[e]=n}))}}({applicationVersion:yt("ver"),applicationBuild:yt("build"),applicationTypeId:yt("typeId"),applicationId:yt("applicationId"),applicationLayer:yt("layer"),deviceId:St("id"),deviceIp:St("ip"),deviceLanguage:St("language"),deviceLocale:St("locale"),deviceModel:St("model"),deviceFriendlyName:St("friendlyName"),deviceNetwork:St("network"),deviceNetworkName:St("networkName"),deviceOEMName:St("oemName"),deviceOS:St("os"),deviceOSVersion:St("osVersion"),deviceRoleInstance:St("roleInstance"),deviceRoleName:St("roleName"),deviceScreenResolution:St("screenResolution"),deviceType:St("type"),deviceMachineName:St("machineName"),deviceVMName:St("vmName"),deviceBrowser:St("browser"),deviceBrowserVersion:St("browserVersion"),locationIp:It("ip"),locationCountry:It("country"),locationProvince:It("province"),locationCity:It("city"),operationId:xt("id"),operationName:xt("name"),operationParentId:xt("parentId"),operationRootId:xt("rootId"),operationSyntheticSource:xt("syntheticSource"),operationCorrelationVector:xt("correlationVector"),sessionId:Ct("id"),sessionIsFirst:Ct("isFirst"),sessionIsNew:Ct("isNew"),userAccountAcquisitionDate:bt("accountAcquisitionDate"),userAccountId:bt("accountId"),userAgent:bt("userAgent"),userId:bt("id"),userStoreRegion:bt("storeRegion"),userAuthUserId:bt("authUserId"),userAnonymousUserAcquisitionDate:bt("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:bt("authUserAcquisitionDate"),cloudName:Tt("name"),cloudRole:Tt("role"),cloudRoleVer:Tt("roleVer"),cloudRoleInstance:Tt("roleInstance"),cloudEnvironment:Tt("environment"),cloudLocation:Tt("location"),cloudDeploymentUnit:Tt("deploymentUnit"),internalNodeName:wt("nodeName"),internalSdkVersion:wt("sdkVersion"),internalAgentVersion:wt("agentVersion"),internalSnippet:wt("snippet"),internalSdkSrc:wt("sdkSrc")})),Pt={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Nt=new Et,Dt=function(e){function Envelope(t,n,r){var i=e.call(this)||this;return i.name=dataSanitizeString(t,r)||Fe,i.data=n,i.time=toISOString(new Date),i.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===i.sampleRate?4:1},tags:1,data:1},i}return __extendsFn(Envelope,e),Envelope}((function Envelope(){this.ver=1,this.sampleRate=100,this.tags={}})),kt=function kt(){},At=function(e){function Data(){return e.call(this)||this}return __extendsFn(Data,e),Data}(kt),Ft=function(e){function Data(t,n){var r=e.call(this)||this;return r.aiDataContract={baseType:1,baseData:1},r.baseType=t,r.baseData=n,r}return __extendsFn(Data,e),Data}(At),Ot="true";function _setValueIf(e,t,n){return setValue(e,t,n,isTruthy)}function _extractPropsAndMeasurements(e,t,n){isNullOrUndefined(e)||objForEachKey(e,(function(e,r){isNumber(r)?n[e]=r:HelperFuncs_isString(r)?t[e]=r:hasJSON()&&(t[e]=getJSON().stringify(r))}))}function _convertPropsUndefinedToCustomDefinedValue(e,t){isNullOrUndefined(e)||objForEachKey(e,(function(n,r){e[n]=r||t}))}function _createEnvelope(e,t,n,r){var i=new Dt(e,r,t);_setValueIf(i,"sampleRate",n.sampleRate),(n.baseData||{}).startTime&&(i.time=toISOString(n.baseData.startTime)),i.iKey=n.iKey;var a=n.iKey.replace(/-/g,"");return i.name=i.name.replace("{0}",a),function _extractPartAExtensions(e,t,n){var r=n.tags=n.tags||{},i=t.ext=t.ext||{},a=t.tags=t.tags||[],o=i.user;o&&(_setValueIf(r,Nt.userAuthUserId,o.authId),_setValueIf(r,Nt.userId,o.id||o.localId));var s=i.app;s&&_setValueIf(r,Nt.sessionId,s.sesId);var c=i.device;c&&(_setValueIf(r,Nt.deviceId,c.id||c.localId),_setValueIf(r,Nt.deviceType,c.deviceClass),_setValueIf(r,Nt.deviceIp,c.ip),_setValueIf(r,Nt.deviceModel,c.model),_setValueIf(r,Nt.deviceType,c.deviceType));var l=t.ext.web;if(l){_setValueIf(r,Nt.deviceLanguage,l.browserLang),_setValueIf(r,Nt.deviceBrowserVersion,l.browserVer),_setValueIf(r,Nt.deviceBrowser,l.browser);var u=n.data=n.data||{},d=u.baseData=u.baseData||{},f=d.properties=d.properties||{};_setValueIf(f,"domain",l.domain),_setValueIf(f,"isManual",l.isManual?Ot:null),_setValueIf(f,"screenRes",l.screenRes),_setValueIf(f,"userConsent",l.userConsent?Ot:null)}var g=i.os;g&&_setValueIf(r,Nt.deviceOS,g.name);var h=i.trace;h&&(_setValueIf(r,Nt.operationParentId,h.parentID),_setValueIf(r,Nt.operationName,dataSanitizeString(e,h.name)),_setValueIf(r,Nt.operationId,h.traceID));for(var m={},v=a.length-1;v>=0;v--)objForEachKey(a[v],(function(e,t){m[e]=t})),a.splice(v,1);objForEachKey(a,(function(e,t){m[e]=t}));var _=p(p({},r),m);_[Nt.internalSdkVersion]||(_[Nt.internalSdkVersion]="javascript:".concat(Mt.Version)),n.tags=optimizeObject(_)}(e,n,i),n.tags=n.tags||[],optimizeObject(i)}function EnvelopeCreatorInit(e,t){isNullOrUndefined(t.baseData)&&e.throwInternal(C.CRITICAL,b.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")}var Mt={Version:"2.7.3"};function EventEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r={},i={};t.baseType!==Ue.dataType&&(r.baseTypeSource=t.baseType),t.baseType===Ue.dataType?(r=t.baseData.properties||{},i=t.baseData.measurements||{}):t.baseData&&_extractPropsAndMeasurements(t.baseData,r,i),_extractPropsAndMeasurements(t.data,r,i),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(r,n);var a=t.baseData.name,o=new Ue(e,a,r,i),s=new Ft(Ue.dataType,o);return _createEnvelope(e,Ue.envelopeType,t,s)}var Ut,Rt=function Serializer(e){x(Serializer,this,(function(t){function _serializeObject(t,n){var r={};if(!t)return e.throwInternal(C.CRITICAL,b.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:n},!0),r;if(t.__aiCircularRefCheck)return e.throwInternal(C.WARNING,b.CircularReferenceDetected,"Circular reference detected while serializing object",{name:n},!0),r;if(!t.aiDataContract){if("measurements"===n)r=_serializeStringMap(t,"number",n);else if("properties"===n)r=_serializeStringMap(t,"string",n);else if("tags"===n)r=_serializeStringMap(t,"string",n);else if(isArray(t))r=_serializeArray(t,n);else{e.throwInternal(C.WARNING,b.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:n},!0);try{getJSON().stringify(t),r=t}catch(t){e.throwInternal(C.CRITICAL,b.CannotSerializeObject,t&&isFunction(t.toString)?t.toString():"Error serializing object",null,!0)}}return r}return t.__aiCircularRefCheck=!0,objForEachKey(t.aiDataContract,(function(i,a){var o=isFunction(a)?1&a():1&a,s=isFunction(a)?4&a():4&a,c=2&a,l=void 0!==t[i],u=isObject(t[i])&&null!==t[i];if(!o||l||c){if(!s){var d=void 0;void 0!==(d=u?c?_serializeArray(t[i],i):_serializeObject(t[i],i):t[i])&&(r[i]=d)}}else e.throwInternal(C.CRITICAL,b.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:i,name:n})})),delete t.__aiCircularRefCheck,r}function _serializeArray(t,n){var r;if(t)if(isArray(t)){r=[];for(var i=0;i<t.length;i++){var a=_serializeObject(t[i],n+"["+i+"]");r.push(a)}}else e.throwInternal(C.CRITICAL,b.ItemNotInArray,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:n},!0);return r}function _serializeStringMap(t,n,r){var i;return t&&(i={},objForEachKey(t,(function(t,a){if("string"===n)void 0===a?i[t]="undefined":null===a?i[t]="null":a.toString?i[t]=a.toString():i[t]="invalid field: toString() is not defined.";else if("number"===n)if(void 0===a)i[t]="undefined";else if(null===a)i[t]="null";else{var o=parseFloat(a);isNaN(o)?i[t]="NaN":i[t]=o}else i[t]="invalid field: "+r+" is of unknown type.",e.throwInternal(C.CRITICAL,i[t],null,!0)}))),i}t.serialize=function(t){var n=_serializeObject(t,"root");try{return getJSON().stringify(n)}catch(t){e.throwInternal(C.CRITICAL,b.CannotSerializeObject,t&&isFunction(t.toString)?t.toString():"Error serializing object",null,!0)}}}))},Lt=function(){function OfflineListener(){var e=getWindow(),t=EnvUtils_getDocument(),n=!1,r=!0;x(OfflineListener,this,(function(i){try{if(e&&attachEvent(e,"online",_setOnline)&&(attachEvent(e,"offline",_setOffline),n=!0),t){var a=t.body||t;isUndefined(a.ononline)||(a.ononline=_setOnline,a.onoffline=_setOffline,n=!0)}if(n){var o=getNavigator();o&&!isNullOrUndefined(o.onLine)&&(r=o.onLine)}}catch(e){n=!1}function _setOnline(){r=!0}function _setOffline(){r=!1}i.isListening=n,i.isOnline=function(){var e=!0,t=getNavigator();return n?e=r:t&&!isNullOrUndefined(t.onLine)&&(e=t.onLine),e},i.isOffline=function(){return!i.isOnline()}}))}return OfflineListener.Offline=new OfflineListener,OfflineListener}(),jt=Lt.Offline,Vt=function(){function HashCodeScoreGenerator(){}return HashCodeScoreGenerator.prototype.getHashCodeScore=function(e){return 100*(this.getHashCode(e)/HashCodeScoreGenerator.INT_MAX_VALUE)},HashCodeScoreGenerator.prototype.getHashCode=function(e){if(""===e)return 0;for(;e.length<8;)e=e.concat(e);for(var t=5381,n=0;n<e.length;++n)t=(t<<5)+t+e.charCodeAt(n),t&=t;return Math.abs(t)},HashCodeScoreGenerator.INT_MAX_VALUE=2147483647,HashCodeScoreGenerator}(),Bt=function Bt(){var e=new Vt,t=new Et;this.getSamplingScore=function(n){return n.tags&&n.tags[t.userId]?e.getHashCodeScore(n.tags[t.userId]):n.ext&&n.ext.user&&n.ext.user.id?e.getHashCodeScore(n.ext.user.id):n.tags&&n.tags[t.operationId]?e.getHashCodeScore(n.tags[t.operationId]):n.ext&&n.ext.telemetryTrace&&n.ext.telemetryTrace.traceID?e.getHashCodeScore(n.ext.telemetryTrace.traceID):100*Math.random()}},zt=function(){function Sample(e,t){this.INT_MAX_VALUE=2147483647;var n=t||safeGetLogger(null);(e>100||e<0)&&(n.throwInternal(C.WARNING,b.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this.sampleRate=e,this.samplingScoreGenerator=new Bt}return Sample.prototype.isSampledIn=function(e){var t=this.sampleRate;return null==t||t>=100||(e.baseType===Ve.dataType||this.samplingScoreGenerator.getSamplingScore(e)<t)},Sample}();function _getResponseText(e){try{return e.responseText}catch(e){}return null}var Ht=((Ut={})[Ue.dataType]=EventEnvelopeCreator,Ut[Re.dataType]=function TraceEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r=t.baseData.message,i=t.baseData.severityLevel,a=t.baseData.properties||{},o=t.baseData.measurements||{};_extractPropsAndMeasurements(t.data,a,o),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(a,n);var s=new Re(e,r,i,a,o),c=new Ft(Re.dataType,s);return _createEnvelope(e,Re.envelopeType,t,c)},Ut[ze.dataType]=function PageViewEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r,i=t.baseData;isNullOrUndefined(i)||isNullOrUndefined(i.properties)||isNullOrUndefined(i.properties.duration)?isNullOrUndefined(t.data)||isNullOrUndefined(t.data.duration)||(r=t.data.duration,delete t.data.duration):(r=i.properties.duration,delete i.properties.duration);var a,o=t.baseData;((t.ext||{}).trace||{}).traceID&&(a=t.ext.trace.traceID);var s=o.id||a,c=o.name,l=o.uri,u=o.properties||{},d=o.measurements||{};isNullOrUndefined(o.refUri)||(u.refUri=o.refUri),isNullOrUndefined(o.pageType)||(u.pageType=o.pageType),isNullOrUndefined(o.isLoggedIn)||(u.isLoggedIn=o.isLoggedIn.toString()),isNullOrUndefined(o.properties)||objForEachKey(o.properties,(function(e,t){u[e]=t})),_extractPropsAndMeasurements(t.data,u,d),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(u,n);var f=new ze(e,c,l,r,u,d,s),p=new Ft(ze.dataType,f);return _createEnvelope(e,ze.envelopeType,t,p)},Ut[He.dataType]=function PageViewPerformanceEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r=t.baseData,i=r.name,a=r.uri||r.url,o=r.properties||{},s=r.measurements||{};_extractPropsAndMeasurements(t.data,o,s),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(o,n);var c=new He(e,i,a,void 0,o,s,r),l=new Ft(He.dataType,c);return _createEnvelope(e,He.envelopeType,t,l)},Ut[Je.dataType]=function ExceptionEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r=t.baseData.measurements||{},i=t.baseData.properties||{};_extractPropsAndMeasurements(t.data,i,r),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(i,n);var a=t.baseData,o=Je.CreateFromInterface(e,a,i,r),s=new Ft(Je.dataType,o);return _createEnvelope(e,Je.envelopeType,t,s)},Ut[Ve.dataType]=function MetricEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r=t.baseData,i=r.properties||{},a=r.measurements||{};_extractPropsAndMeasurements(t.data,i,a),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(i,n);var o=new Ve(e,r.name,r.average,r.sampleCount,r.min,r.max,r.stdDev,i,a),s=new Ft(Ve.dataType,o);return _createEnvelope(e,Ve.envelopeType,t,s)},Ut[lt.dataType]=function DependencyEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r=t.baseData.measurements||{},i=t.baseData.properties||{};_extractPropsAndMeasurements(t.data,i,r),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(i,n);var a=t.baseData;if(isNullOrUndefined(a))return e.warnToConsole("Invalid input for dependency data"),null;var o=a.properties&&a.properties[ke]?a.properties[ke]:"GET",s=new lt(e,a.id,a.target,a.name,a.duration,a.success,a.responseCode,o,a.type,a.correlationContext,i,r),c=new Ft(lt.dataType,s);return _createEnvelope(e,lt.envelopeType,t,c)},Ut),qt=function(e){function Sender(){var t,n,r=e.call(this)||this;r.priority=1001,r.identifier=be;var i,a,o,s,c,l=!1,u={},d=0;return r._senderConfig={endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},disableXhr:function(){return!1},onunloadDisableFetch:function(){return!1},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100},customHeaders:function(){},convertUndefined:function(){},eventsLimitInMem:function(){return 1e4}},x(Sender,r,(function(e,f){function _checkResponsStatus(n,r,i,a,o,s){var c=null;if(e._appId||(c=_parseResponse(s))&&c.appId&&(e._appId=c.appId),(n<200||n>=300)&&0!==n){if((301===n||307===n||308===n)&&!_checkAndUpdateEndPointUrl(i))return void e._onError(r,o);!e._senderConfig.isRetryDisabled()&&_isRetriable(n)?(_resendPayload(r),e.diagLog().throwInternal(C.WARNING,b.TransmissionFailed,". Response code "+n+". Will retry to send "+r.length+" items.")):e._onError(r,o)}else if(jt.isOffline()){if(!e._senderConfig.isRetryDisabled()){_resendPayload(r,10),e.diagLog().throwInternal(C.WARNING,b.TransmissionFailed,". Offline - Response Code: ".concat(n,". Offline status: ").concat(jt.isOffline(),". Will retry to send ").concat(r.length," items."))}}else _checkAndUpdateEndPointUrl(i),206===n?(c||(c=_parseResponse(s)),c&&!e._senderConfig.isRetryDisabled()?e._onPartialSuccess(r,c):e._onError(r,o)):(t=0,e._onSuccess(r,a))}function _checkAndUpdateEndPointUrl(t){return!(o>=10)&&(!isNullOrUndefined(t)&&""!==t&&t!==e._senderConfig.endpointUrl()&&(e._senderConfig.endpointUrl=function(){return t},++o,!0))}function _doUnloadSend(e,t){c?c(e,!1):_beaconSender(e,t)}function _doBeaconSend(t){var n=getNavigator(),r=e._buffer,i=e._senderConfig.endpointUrl(),a=e._buffer.batchPayloads(t),o=new Blob([a],{type:"text/plain;charset=UTF-8"}),s=n.sendBeacon(i,o);return s&&(r.markAsSent(t),e._onSuccess(t,t.length)),s}function _beaconSender(t,n){if(isArray(t)&&t.length>0&&!_doBeaconSend(t)){for(var r=[],i=0;i<t.length;i++){var a=t[i];_doBeaconSend([a])||r.push(a)}r.length>0&&(s(r,!0),e.diagLog().throwInternal(C.WARNING,b.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function _xhrSender(t,n){var r=new XMLHttpRequest,i=e._senderConfig.endpointUrl();try{r[Pe]=!0}catch(e){}r.open("POST",i,n),r.setRequestHeader("Content-type","application/json"),isInternalApplicationInsightsEndpoint(i)&&r.setRequestHeader(et.sdkContextHeader,et.sdkContextHeaderAppIdRequest),arrForEach(objKeys(u),(function(e){r.setRequestHeader(e,u[e])})),r.onreadystatechange=function(){return e._xhrReadyStateChange(r,t,t.length)},r.onerror=function(n){return e._onError(t,_formatErrorMessageXhr(r),n)};var a=e._buffer.batchPayloads(t);r.send(a),e._buffer.markAsSent(t)}function _fetchKeepAliveSender(t,n){if(isArray(t)){for(var r=t.length,i=0;i<t.length;i++)r+=t[i].length;d+r<=65e3?_doFetchSender(t,!1):isBeaconsSupported()?_beaconSender(t):(s&&s(t,!0),e.diagLog().throwInternal(C.WARNING,b.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}function _fetchSender(e,t){_doFetchSender(e,!0)}function _doFetchSender(t,n){var r,i=e._senderConfig.endpointUrl(),a=e._buffer.batchPayloads(t),o=new Blob([a],{type:"application/json"}),s=new Headers,c=a.length,l=!1,f=!1;isInternalApplicationInsightsEndpoint(i)&&s.append(et.sdkContextHeader,et.sdkContextHeaderAppIdRequest),arrForEach(objKeys(u),(function(e){s.append(e,u[e])}));var p=((r={method:"POST",headers:s,body:o})[Pe]=!0,r);n||(p.keepalive=!0,l=!0,d+=c);var g=new Request(i,p);try{g[Pe]=!0}catch(e){}e._buffer.markAsSent(t);try{fetch(g).then((function(r){n||(d-=c,c=0),f||(f=!0,r.ok?r.text().then((function(e){_checkResponsStatus(r.status,t,r.url,t.length,r.statusText,e)})):e._onError(t,r.statusText))})).catch((function(r){n||(d-=c,c=0),f||(f=!0,e._onError(t,r.message))}))}catch(n){f||e._onError(t,dumpObj(n))}l&&!f&&(f=!0,e._onSuccess(t,t.length))}function _parseResponse(t){try{if(t&&""!==t){var n=getJSON().parse(t);if(n&&n.itemsReceived&&n.itemsReceived>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors.length)return n}}catch(n){e.diagLog().throwInternal(C.CRITICAL,b.InvalidBackendResponse,"Cannot parse the response. "+getExceptionName(n),{response:t})}return null}function _resendPayload(r,i){if(void 0===i&&(i=1),r&&0!==r.length){var a=e._buffer;a.clearSent(r),t++;for(var o=0,s=r;o<s.length;o++){var c=s[o];a.enqueue(c)}!function _setRetryTime(e){var r,i=10;if(t<=1)r=i;else{var a=(Math.pow(2,t)-1)/2,o=Math.floor(Math.random()*a*i)+1;o*=e,r=Math.max(Math.min(o,3600),i)}var s=dateNow()+1e3*r;n=s}(i),_setupTimer()}}function _setupTimer(){if(!i&&!l){var t=n?Math.max(0,n-dateNow()):0,r=Math.max(e._senderConfig.maxBatchInterval(),t);i=setTimeout((function(){i=null,e.triggerSend(!0,null,1)}),r)}}function _clearScheduledTimer(){clearTimeout(i),i=null,n=null}function _isRetriable(e){return 408===e||429===e||500===e||503===e}function _formatErrorMessageXhr(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+_getResponseText(e)||0:t}function _xdrSender(t,n){var r=e._buffer,i=getWindow(),a=new XDomainRequest;a.onload=function(){return e._xdrOnLoad(a,t)},a.onerror=function(n){return e._onError(t,_formatErrorMessageXdr(a),n)};var o=i&&i.location&&i.location.protocol||"";if(0!==e._senderConfig.endpointUrl().lastIndexOf(o,0))return e.diagLog().throwInternal(C.WARNING,b.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void r.clear();var s=e._senderConfig.endpointUrl().replace(/^(https?:)/,"");a.open("POST",s);var c=r.batchPayloads(t);a.send(c),r.markAsSent(t)}function _formatErrorMessageXdr(e,t){return e?"XDomainRequest,Response:"+_getResponseText(e)||0:t}e.pause=function(){_clearScheduledTimer(),l=!0},e.resume=function(){l&&(l=!1,n=null,e._buffer.size()>e._senderConfig.maxBatchSizeInBytes()&&e.triggerSend(!0,null,10),_setupTimer())},e.flush=function(){if(!l){_clearScheduledTimer();try{e.triggerSend(!0,null,1)}catch(t){e.diagLog().throwInternal(C.CRITICAL,b.FlushFailed,"flush failed, telemetry will not be collected: "+getExceptionName(t),{exception:dumpObj(t)})}}},e.onunloadFlush=function(){if(!l)if(!1!==e._senderConfig.onunloadDisableBeacon()&&!1!==e._senderConfig.isBeaconApiDisabled()||!isBeaconsSupported())e.flush();else try{e.triggerSend(!0,_doUnloadSend,2)}catch(t){e.diagLog().throwInternal(C.CRITICAL,b.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+getExceptionName(t),{exception:dumpObj(t)})}},e.teardown=function _notImplemented(){throwError("Method not implemented.")},e.addHeader=function(e,t){u[e]=t},e.initialize=function(i,l,u,d){f.initialize(i,l,u,d);var p=e._getTelCtx(),g=e.identifier;a=new Rt(l.logger),t=0,n=null,0,e._sender=null,o=0;var h=e.diagLog();objForEachKey({endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},disableXhr:function(){return!1},onunloadDisableFetch:function(){return!1},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100},customHeaders:function(){},convertUndefined:function(){},eventsLimitInMem:function(){return 1e4}},(function(t,n){e._senderConfig[t]=function(){return p.getConfig(g,t,n())}})),e._buffer=e._senderConfig.enableSessionStorageBuffer()&&utlCanUseSessionStorage()?new _t(h,e._senderConfig):new vt(h,e._senderConfig),e._sample=new zt(e._senderConfig.samplingPercentage(),h),function _validateInstrumentationKey(e){if(!isNullOrUndefined(e.disableInstrumentationKeyValidation)&&e.disableInstrumentationKeyValidation)return!0;return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e.instrumentationKey)}(i)||h.throwInternal(C.CRITICAL,b.InvalidInstrumentationKey,"Invalid Instrumentation key "+i.instrumentationKey),!isInternalApplicationInsightsEndpoint(e._senderConfig.endpointUrl())&&e._senderConfig.customHeaders()&&e._senderConfig.customHeaders().length>0&&arrForEach(e._senderConfig.customHeaders(),(function(e){r.addHeader(e.header,e.value)}));var m=e._senderConfig,v=null;!m.disableXhr()&&useXDomainRequest()?v=_xdrSender:!m.disableXhr()&&isXhrSupported()&&(v=_xhrSender),!v&&isFetchSupported()&&(v=_fetchSender),s=v||_xhrSender,!m.isBeaconApiDisabled()&&isBeaconsSupported()&&(v=_beaconSender),e._sender=v||_xhrSender,c=!m.onunloadDisableFetch()&&isFetchSupported(!0)?_fetchKeepAliveSender:isBeaconsSupported()?_beaconSender:!m.disableXhr()&&useXDomainRequest()?_xdrSender:!m.disableXhr()&&isXhrSupported()?_xhrSender:s},e.processTelemetry=function(t,n){n=e._getTelCtx(n);try{if(e._senderConfig.disableTelemetry())return;if(!t)return void n.diagLog().throwInternal(C.CRITICAL,b.CannotSendEmptyTelemetry,"Cannot send empty telemetry");if(t.baseData&&!t.baseType)return void n.diagLog().throwInternal(C.CRITICAL,b.InvalidEvent,"Cannot send telemetry without baseData and baseType");if(t.baseType||(t.baseType="EventData"),!e._sender)return void n.diagLog().throwInternal(C.CRITICAL,b.SenderNotInitialized,"Sender was not initialized");if(!function _isSampledIn(t){return e._sample.isSampledIn(t)}(t))return void n.diagLog().throwInternal(C.WARNING,b.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:e._sample.sampleRate});t.sampleRate=e._sample.sampleRate;var r=e._senderConfig.convertUndefined()||void 0,i=t.iKey||e._senderConfig.instrumentationKey(),o=Sender.constructEnvelope(t,i,n.diagLog(),r);if(!o)return void n.diagLog().throwInternal(C.CRITICAL,b.CreateEnvelopeError,"Unable to create an AppInsights envelope");var s=!1;if(t.tags&&t.tags.ProcessLegacy&&(arrForEach(t.tags.ProcessLegacy,(function(e){try{e&&!1===e(o)&&(s=!0,n.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(e){n.diagLog().throwInternal(C.CRITICAL,b.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+getExceptionName(e),{exception:dumpObj(e)},!0)}})),delete t.tags.ProcessLegacy),s)return;var c=a.serialize(o),l=e._buffer;l.size()+c.length>e._senderConfig.maxBatchSizeInBytes()&&e.triggerSend(!0,null,10),l.enqueue(c),_setupTimer()}catch(e){n.diagLog().throwInternal(C.WARNING,b.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+getExceptionName(e),{exception:dumpObj(e)})}e.processNext(t,n)},e._xhrReadyStateChange=function(e,t,n){4===e.readyState&&_checkResponsStatus(e.status,t,e.responseURL,n,_formatErrorMessageXhr(e),_getResponseText(e)||e.response)},e.triggerSend=function(t,n,i){if(void 0===t&&(t=!0),!l)try{var a=e._buffer;if(e._senderConfig.disableTelemetry())a.clear();else{if(a.count()>0){var o=a.getItems();!function _notifySendRequest(t,n){var r=function _getNotifyMgr(){var t="getNotifyMgr";if(e.core[t])return e.core[t]();return e.core._notificationManager}();if(r&&r.eventsSendRequest)try{r.eventsSendRequest(t,n)}catch(t){e.diagLog().throwInternal(C.CRITICAL,b.NotificationException,"send request notification failed: "+getExceptionName(t),{exception:dumpObj(t)})}}(i||0,t),n?n.call(r,o,t):e._sender(o,t)}+new Date}_clearScheduledTimer()}catch(t){var s=getIEVersion();(!s||s>9)&&e.diagLog().throwInternal(C.CRITICAL,b.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+getExceptionName(t),{exception:dumpObj(t)})}},e._onError=function(t,n,r){e.diagLog().throwInternal(C.WARNING,b.OnError,"Failed to send telemetry.",{message:n}),e._buffer.clearSent(t)},e._onPartialSuccess=function(t,n){for(var r=[],i=[],a=0,o=n.errors.reverse();a<o.length;a++){var s=o[a],c=t.splice(s.index,1)[0];_isRetriable(s.statusCode)?i.push(c):r.push(c)}t.length>0&&e._onSuccess(t,n.itemsAccepted),r.length>0&&e._onError(r,_formatErrorMessageXhr(null,["partial success",n.itemsAccepted,"of",n.itemsReceived].join(" "))),i.length>0&&(_resendPayload(i),e.diagLog().throwInternal(C.WARNING,b.TransmissionFailed,"Partial success. Delivered: "+t.length+", Failed: "+r.length+". Will retry to send "+i.length+" our of "+n.itemsReceived+" items"))},e._onSuccess=function(t,n){e._buffer.clearSent(t)},e._xdrOnLoad=function(n,r){var i=_getResponseText(n);if(!n||i+""!="200"&&""!==i){var a=_parseResponse(i);a&&a.itemsReceived&&a.itemsReceived>a.itemsAccepted&&!e._senderConfig.isRetryDisabled()?e._onPartialSuccess(r,a):e._onError(r,_formatErrorMessageXdr(n))}else t=0,e._onSuccess(r,0)}})),r}return __extendsFn(Sender,e),Sender.constructEnvelope=function(e,t,n,r){var i;return i=t===e.iKey||isNullOrUndefined(t)?e:p(p({},e),{iKey:t}),(Ht[i.baseType]||EventEnvelopeCreator)(n,i,r)},Sender}(J),Gt=function Gt(){},Kt=function(){function _SessionManager(e,t){var n,r,i=safeGetLogger(t),a=safeGetCookieMgr(t);x(_SessionManager,this,(function(t){e||(e={}),isFunction(e.sessionExpirationMs)||(e.sessionExpirationMs=function(){return _SessionManager.acquisitionSpan}),isFunction(e.sessionRenewalMs)||(e.sessionRenewalMs=function(){return _SessionManager.renewalSpan}),t.config=e;var o=t.config.sessionCookiePostfix&&t.config.sessionCookiePostfix()?t.config.sessionCookiePostfix():t.config.namePrefix&&t.config.namePrefix()?t.config.namePrefix():"";function _initializeAutomaticSessionWithData(e,t){var n=!1,r=", session will be reset",a=t.split("|");if(a.length>=2)try{var o=+a[1]||0,s=+a[2]||0;isNaN(o)||o<=0?i.throwInternal(C.WARNING,b.SessionRenewalDateIsZero,"AI session acquisition date is 0"+r):isNaN(s)||s<=0?i.throwInternal(C.WARNING,b.SessionRenewalDateIsZero,"AI session renewal date is 0"+r):a[0]&&(e.id=a[0],e.acquisitionDate=o,e.renewalDate=s,n=!0)}catch(e){i.throwInternal(C.CRITICAL,b.ErrorParsingAISessionCookie,"Error parsing ai_session value ["+(t||"")+"]"+r+" - "+getExceptionName(e),{exception:dumpObj(e)})}return n}function _setCookie(e,i){var o=e.acquisitionDate;e.renewalDate=i;var s=t.config,c=s.sessionRenewalMs(),l=o+s.sessionExpirationMs()-i,u=[e.id,o,i],d=0;d=l<c?l/1e3:c/1e3;var f=s.cookieDomain?s.cookieDomain():null;a.set(n(),u.join("|"),s.sessionExpirationMs()>0?d:null,f),r=i}n=function(){return"ai_session"+o},t.automaticSession=new Gt,t.update=function(){var e=dateNow(),o=!1,s=t.automaticSession;s.id||(o=!function _initializeAutomaticSession(e,t){var r=!1,o=a.get(n());if(o&&isFunction(o.split))r=_initializeAutomaticSessionWithData(e,o);else{var s=utlGetLocalStorage(i,n());s&&(r=_initializeAutomaticSessionWithData(e,s))}return r||!!e.id}(s));var c=t.config.sessionExpirationMs();if(!o&&c>0){var l=t.config.sessionRenewalMs(),u=e-s.acquisitionDate,d=e-s.renewalDate;o=(o=(o=u<0||d<0)||u>c)||d>l}o?function _renew(e){var n=t.config||{},r=(n.getNewId?n.getNewId():null)||newId;t.automaticSession.id=r(n.idLength?n.idLength():22),t.automaticSession.acquisitionDate=e,_setCookie(t.automaticSession,e),utlCanUseLocalStorage()||i.throwInternal(C.WARNING,b.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")}(e):(!r||e-r>_SessionManager.cookieUpdateInterval)&&_setCookie(s,e)},t.backup=function(){var e=t.automaticSession;!function _setStorage(e,t,r){utlSetLocalStorage(i,n(),[e,t,r].join("|"))}(e.id,e.acquisitionDate,e.renewalDate)}}))}return _SessionManager.acquisitionSpan=864e5,_SessionManager.renewalSpan=18e5,_SessionManager.cookieUpdateInterval=6e4,_SessionManager}(),Wt=function Wt(){},Xt=function Xt(){this.id="browser",this.deviceClass="Browser"},Jt=function Jt(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:2.7.3"};function _validateUserInput(e){return!("string"!=typeof e||!e||e.match(/,|;|=| |\|/))}var Yt=function(){function User(e,t){this.isNewUser=!1,this.isUserCookieSet=!1;var n,r=safeGetLogger(t),i=safeGetCookieMgr(t);x(User,this,(function(t){t.config=e;var a=t.config.userCookiePostfix&&t.config.userCookiePostfix()?t.config.userCookiePostfix():"";n=function(){return User.userCookieName+a};var o=i.get(n());if(o){t.isNewUser=!1;var s=o.split(User.cookieSeparator);s.length>0&&(t.id=s[0],t.isUserCookieSet=!!t.id)}function _generateNewId(){var t=e||{};return((t.getNewId?t.getNewId():null)||newId)(t.idLength?e.idLength():22)}function _generateNewCookie(e){var n=toISOString(new Date);return t.accountAcquisitionDate=n,t.isNewUser=!0,[e,n]}function _setUserCookie(e){t.isUserCookieSet=i.set(n(),e,31536e3)}if(!t.id){t.id=_generateNewId(),_setUserCookie(_generateNewCookie(t.id).join(User.cookieSeparator));var c=e.namePrefix&&e.namePrefix()?e.namePrefix()+"ai_session":"ai_session";utlRemoveStorage(r,c)}t.accountId=e.accountId?e.accountId():void 0;var l=i.get(User.authUserCookieName);if(l){var u=(l=decodeURI(l)).split(User.cookieSeparator);u[0]&&(t.authenticatedId=u[0]),u.length>1&&u[1]&&(t.accountId=u[1])}t.setAuthenticatedUserContext=function(e,n,a){if(void 0===a&&(a=!1),!_validateUserInput(e)||n&&!_validateUserInput(n))r.throwInternal(C.WARNING,b.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);else{t.authenticatedId=e;var o=t.authenticatedId;n&&(t.accountId=n,o=[t.authenticatedId,t.accountId].join(User.cookieSeparator)),a&&i.set(User.authUserCookieName,encodeURI(o))}},t.clearAuthenticatedUserContext=function(){t.authenticatedId=null,t.accountId=null,i.del(User.authUserCookieName)},t.update=function(e){t.id===e&&t.isUserCookieSet||_setUserCookie(_generateNewCookie(e||_generateNewId()).join(User.cookieSeparator))}}))}return User.cookieSeparator="|",User.userCookieName="ai_user",User.authUserCookieName="ai_authUser",User}(),Qt=function Qt(){},Zt=function Zt(e,t,n,r){var i=this;i.traceID=e||generateW3CId(),i.parentID=t,i.name=n;var a=getLocation();!n&&a&&a.pathname&&(i.name=a.pathname),i.name=dataSanitizeString(r,i.name)},$t="ext",en="tags";function _removeEmpty(e,t){e&&e[t]&&0===objKeys(e[t]).length&&delete e[t]}var tn=function TelemetryContext(e,t){var n=this,r=e.logger;this.appId=function(){return null},this.getSessionId=function(){return null},x(TelemetryContext,this,(function(i){i.application=new Wt,i.internal=new Jt(t),hasWindow()&&(i.sessionManager=new Kt(t,e),i.device=new Xt,i.location=new Qt,i.user=new Yt(t,e),i.telemetryTrace=new Zt(void 0,void 0,void 0,r),i.session=new Gt),i.getSessionId=function(){var e=i.session,t=null;if(e&&HelperFuncs_isString(e.id))t=e.id;else{var n=(i.sessionManager||{}).automaticSession;t=n&&HelperFuncs_isString(n.id)?n.id:null}return t},i.applySessionContext=function(e,t){setValue(getSetValue(e.ext,Pt.AppExt),"sesId",i.getSessionId(),HelperFuncs_isString)},i.applyOperatingSystemContxt=function(e,t){setValue(e.ext,Pt.OSExt,i.os)},i.applyApplicationContext=function(e,t){var n=i.application;if(n){var r=getSetValue(e,en);setValue(r,Nt.applicationVersion,n.ver,HelperFuncs_isString),setValue(r,Nt.applicationBuild,n.build,HelperFuncs_isString)}},i.applyDeviceContext=function(e,t){var n=i.device;if(n){var r=getSetValue(getSetValue(e,$t),Pt.DeviceExt);setValue(r,"localId",n.id,HelperFuncs_isString),setValue(r,"ip",n.ip,HelperFuncs_isString),setValue(r,"model",n.model,HelperFuncs_isString),setValue(r,"deviceClass",n.deviceClass,HelperFuncs_isString)}},i.applyInternalContext=function(e,t){var n=i.internal;if(n){var r=getSetValue(e,en);setValue(r,Nt.internalAgentVersion,n.agentVersion,HelperFuncs_isString),setValue(r,Nt.internalSdkVersion,n.sdkVersion,HelperFuncs_isString),e.baseType!==V.dataType&&e.baseType!==ze.dataType||(setValue(r,Nt.internalSnippet,n.snippetVer,HelperFuncs_isString),setValue(r,Nt.internalSdkSrc,n.sdkSrc,HelperFuncs_isString))}},i.applyLocationContext=function(e,t){var r=n.location;r&&setValue(getSetValue(e,en,[]),Nt.locationIp,r.ip,HelperFuncs_isString)},i.applyOperationContext=function(e,t){var n=i.telemetryTrace;if(n){var r=getSetValue(getSetValue(e,$t),Pt.TraceExt,{traceID:void 0,parentID:void 0});setValue(r,"traceID",n.traceID,HelperFuncs_isString),setValue(r,"name",n.name,HelperFuncs_isString),setValue(r,"parentID",n.parentID,HelperFuncs_isString)}},i.applyWebContext=function(e,t){var r=n.web;r&&setValue(getSetValue(e,$t),Pt.WebExt,r)},i.applyUserContext=function(e,t){var n=i.user;if(n){setValue(getSetValue(e,en,[]),Nt.userAccountId,n.accountId,HelperFuncs_isString);var r=getSetValue(getSetValue(e,$t),Pt.UserExt);setValue(r,"id",n.id,HelperFuncs_isString),setValue(r,"authId",n.authenticatedId,HelperFuncs_isString)}},i.cleanUp=function(e,t){var n=e.ext;n&&(_removeEmpty(n,Pt.DeviceExt),_removeEmpty(n,Pt.UserExt),_removeEmpty(n,Pt.WebExt),_removeEmpty(n,Pt.OSExt),_removeEmpty(n,Pt.AppExt),_removeEmpty(n,Pt.TraceExt))}}))};const nn=function(e){function PropertiesPlugin(){var t,n,r=e.call(this)||this;return r.priority=110,r.identifier=Ce,x(PropertiesPlugin,r,(function(e,r){e.initialize=function(i,a,o,s){r.initialize(i,a,o,s);var c=e._getTelCtx(),l=e.identifier,u=PropertiesPlugin.getDefaultConfig();n=n||{},objForEachKey(u,(function(e,t){n[e]=function(){return c.getConfig(l,e,t())}})),e.context=new tn(a,n),t=getExtensionByName(o,be),e.context.appId=function(){return t?t._appId:null},e._extConfig=n},e.processTelemetry=function(t,n){if(isNullOrUndefined(t));else{n=e._getTelCtx(n),t.name===ze.envelopeType&&n.diagLog().resetInternalMessageCount();var r=e.context||{};r.session&&"string"!=typeof e.context.session.id&&r.sessionManager&&r.sessionManager.update();var i=r.user;if(i&&!i.isUserCookieSet&&i.update(r.user.id),function _processTelemetryInternal(t,n){getSetValue(t,"tags",[]),getSetValue(t,"ext",{});var r=e.context;r.applySessionContext(t,n),r.applyApplicationContext(t,n),r.applyDeviceContext(t,n),r.applyOperationContext(t,n),r.applyUserContext(t,n),r.applyOperatingSystemContxt(t,n),r.applyWebContext(t,n),r.applyLocationContext(t,n),r.applyInternalContext(t,n),r.cleanUp(t,n)}(t,n),i&&i.isNewUser){i.isNewUser=!1;var a=new V(b.SendBrowserInfoOnUserInit,(getNavigator()||{}).userAgent||"");n.diagLog().logInternalMessage(C.CRITICAL,a)}e.processNext(t,n)}}})),r}return __extendsFn(PropertiesPlugin,e),PropertiesPlugin.getDefaultConfig=function(){return{instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},getSessionId:function(){return null},namePrefix:function(){},sessionCookiePostfix:function(){},userCookiePostfix:function(){},idLength:function(){return 22},getNewId:function(){return null}}},PropertiesPlugin}(J);var rn=["req","rsp","hkErr","fnErr"];function _arrLoop(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n);n++);}function _doCallbacks(e,t,n,r,i){i>=0&&i<=2&&_arrLoop(e,(function(e,a){var o=e.cbks,s=o[rn[i]];if(s){t.ctx=function(){return r[a]=r[a]||{}};try{s.apply(t.inst,n)}catch(e){var c=t.err;try{var l=o[rn[2]];l&&(t.err=e,l.apply(t.inst,n))}catch(e){}finally{t.err=c}}}}))}var an=Object.getPrototypeOf;function _getOwner(e,t,n){var r=null;return e&&(HelperFuncs_hasOwnProperty(e,t)?r=e:n&&(r=_getOwner(function InstrumentHooks_getObjProto(e){if(e){if(an)return an(e);var t=e.__proto__||e.prototype||e.constructor;if(t)return t}return null}(e),t,!1))),r}function InstrumentFunc(e,t,n,i){if(void 0===i&&(i=!0),e&&t&&n){var a=_getOwner(e,t,i);if(a){var o=a[t];if(typeof o===r){var s=o._aiHooks;if(!s){var c=function _createFunctionHook(e){return function(){var t=this,n=arguments,r=e.h,i={name:e.n,inst:t,ctx:null,set:_replaceArg},a=[],o=_createArgs([i],n);function _createArgs(e,t){return _arrLoop(t,(function(t){e.push(t)})),e}function _replaceArg(e,t){(n=_createArgs([],n))[e]=t,o=_createArgs([i],n)}_doCallbacks(r,i,o,a,0);var s=e.f;try{i.rslt=s.apply(t,n)}catch(e){throw i.err=e,_doCallbacks(r,i,o,a,3),e}return _doCallbacks(r,i,o,a,1),i.rslt}}(s={i:0,n:t,f:o,h:[]});c._aiHooks=s,a[t]=c}var l={id:s.i,cbks:n,rm:function(){var e=this.id;_arrLoop(s.h,(function(t,n){if(t.id===e)return s.h.splice(n,1),1}))}};return s.i++,s.h.push(l),l}}}return null}function _calcPerfDuration(e,t,n){var r=0,i=e[t],a=e[n];return i&&a&&(r=dateTimeUtilsDuration(i,a)),r}function _setPerfDuration(e,t,n,r,i){var a=0,o=_calcPerfDuration(n,r,i);return o&&(a=_setPerfValue(e,t,msToTimeSpan(o))),a}function _setPerfValue(e,t,n){var r=0;e&&t&&n&&((e.ajaxPerf=e.ajaxPerf||{})[t]=n,r=1);return r}var on=function on(){var e=this;e.openDone=!1,e.setRequestHeaderDone=!1,e.sendDone=!1,e.abortDone=!1,e.stateChangeAttached=!1},sn=function ajaxRecord(e,t,n){var r=this,i=n;r.perfMark=null,r.completed=!1,r.requestHeadersSize=null,r.requestHeaders=null,r.responseReceivingDuration=null,r.callbackDuration=null,r.ajaxTotalDuration=null,r.aborted=0,r.pageUrl=null,r.requestUrl=null,r.requestSize=0,r.method=null,r.status=null,r.requestSentTime=null,r.responseStartedTime=null,r.responseFinishedTime=null,r.callbackFinishedTime=null,r.endTime=null,r.xhrMonitoringState=new on,r.clientFailure=0,r.traceID=e,r.spanID=t,x(ajaxRecord,r,(function(e){e.getAbsoluteUrl=function(){return e.requestUrl?urlGetAbsoluteUrl(e.requestUrl):null},e.getPathName=function(){return e.requestUrl?dataSanitizeUrl(i,urlGetCompleteUrl(e.method,e.requestUrl)):null},e.CreateTrackItem=function(t,n,r){var i;if(e.ajaxTotalDuration=Math.round(1e3*dateTimeUtilsDuration(e.requestSentTime,e.responseFinishedTime))/1e3,e.ajaxTotalDuration<0)return null;var a=((i={id:"|"+e.traceID+"."+e.spanID,target:e.getAbsoluteUrl(),name:e.getPathName(),type:t,startTime:null,duration:e.ajaxTotalDuration,success:+e.status>=200&&+e.status<400,responseCode:+e.status,method:e.method}).properties={HttpMethod:e.method},i);if(e.requestSentTime&&(a.startTime=new Date,a.startTime.setTime(e.requestSentTime)),function _populatePerfData(e,t){var n=e.perfTiming,r=t.properties||{},i=0,a="name",o="domainLookup",s="connect",c="redirect",l="request",u="response",d="duration",f="startTime",p="connectEnd",g="requestStart",h="responseEnd",m=c+"Start",v=c="End",_="transferSize",y="encodedBodySize",S="decodedBodySize",I="serverTiming";if(n){i|=_setPerfDuration(r,c,n,m,v),i|=_setPerfDuration(r,o,n,"domainLookupStart","domainLookupEnd"),i|=_setPerfDuration(r,s,n,"connectStart",p),i|=_setPerfDuration(r,l,n,g,"requestEnd"),i|=_setPerfDuration(r,u,n,"responseStart",h),i|=_setPerfDuration(r,"networkConnect",n,f,p),i|=_setPerfDuration(r,"sentRequest",n,g,h);var x=n.duration;x||(x=_calcPerfDuration(n,f,h)||0),i|=_setPerfValue(r,d,x),i|=_setPerfValue(r,"perfTotal",x);var C=n.serverTiming;if(C){var b={};arrForEach(C,(function(e,t){var n=function normalizeJsName(e){var t=e,n=/([^\w\d_$])/g;return n.test(e)&&(t=e.replace(n,"_")),t}(e.name||""+t),r=b[n]||{};objForEachKey(e,(function(e,t){(e!==a&&HelperFuncs_isString(t)||isNumber(t))&&(r[e]&&(t=r[e]+";"+t),!t&&HelperFuncs_isString(t)||(r[e]=t))})),b[n]=r})),i|=_setPerfValue(r,I,b)}i|=_setPerfValue(r,_,n.transferSize),i|=_setPerfValue(r,y,n.encodedBodySize),i|=_setPerfValue(r,S,n.decodedBodySize)}else e.perfMark&&(i|=_setPerfValue(r,"missing",e.perfAttempts));i&&(t.properties=r)}(e,a),n&&objKeys(e.requestHeaders).length>0&&(a.properties=a.properties||{},a.properties.requestHeaders=e.requestHeaders),r){var o=r();if(o){var s=o.correlationContext;if(s&&(a.correlationContext=s),o.headerMap&&objKeys(o.headerMap).length>0&&(a.properties=a.properties||{},a.properties.responseHeaders=o.headerMap),e.errorStatusText&&e.status>=400){var c=o.type;a.properties=a.properties||{},""!==c&&"text"!==c||(a.properties.responseText=o.responseText?o.statusText+" - "+o.responseText:o.statusText),"json"===c&&(a.properties.responseText=o.response?o.statusText+" - "+JSON.stringify(o.response):o.statusText)}}}return a}}))},cn=function(){function Traceparent(e,t){var n=this;n.traceFlag=Traceparent.DEFAULT_TRACE_FLAG,n.version=Traceparent.DEFAULT_VERSION,e&&Traceparent.isValidTraceId(e)?n.traceId=e:n.traceId=generateW3CId(),t&&Traceparent.isValidSpanId(t)?n.spanId=t:n.spanId=generateW3CId().substr(0,16)}return Traceparent.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},Traceparent.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},Traceparent.prototype.toString=function(){var e=this;return"".concat(e.version,"-").concat(e.traceId,"-").concat(e.spanId,"-").concat(e.traceFlag)},Traceparent.DEFAULT_TRACE_FLAG="01",Traceparent.DEFAULT_VERSION="00",Traceparent}(),ln="ai.ajxmn.",un="fetch",dn=0;function _getFailedAjaxDiagnosticsMessage(e){var t="";try{isNullOrUndefined(e)||isNullOrUndefined(e.ajaxData)||isNullOrUndefined(e.ajaxData.requestUrl)||(t+="(url: '"+e.ajaxData.requestUrl+"')")}catch(e){}return t}function _throwInternalCritical(e,t,n,r,i){e.diagLog().throwInternal(C.CRITICAL,t,n,r,i)}function _throwInternalWarning(e,t,n,r,i){e.diagLog().throwInternal(C.WARNING,t,n,r,i)}function _createErrorCallbackFunc(e,t,n){return function(r){_throwInternalCritical(e,t,n,{ajaxDiagnosticsMessage:_getFailedAjaxDiagnosticsMessage(r.inst),exception:dumpObj(r.err)})}}function _indexOf(e,t){return e&&t?e.indexOf(t):-1}var fn=function(e){function AjaxMonitor(){var t=e.call(this)||this;t.identifier=AjaxMonitor.identifier,t.priority=120;var n,r,i,a,o,s,c=getLocation(),l=!1,u=!1,d=c&&c.host&&c.host.toLowerCase(),f=AjaxMonitor.getEmptyConfig(),g=!1,h=!1,m=0,v=!1,_=0,y=!1,S=[],I={};return x(AjaxMonitor,t,(function(e,t){function _canIncludeHeaders(e){var t=!0;return(e||f.ignoreHeaders)&&arrForEach(f.ignoreHeaders,(function(n){if(n.toLowerCase()===e.toLowerCase())return t=!1,-1})),t}function _hookProto(e,t,n){S.push(function InstrumentProto(e,t,n){return e?InstrumentFunc(e.prototype,t,n,!1):null}(e,t,n))}function _isDisabledRequest(e,t,n){var r=!1,i=((HelperFuncs_isString(t)?t:(t||{}).url||"")||"").toLowerCase();if(arrForEach(o,(function(e){var t=e;HelperFuncs_isString(e)&&(t=new RegExp(e)),r||(r=t.test(i))})),r)return r;var a=_indexOf(i,"?"),s=_indexOf(i,"#");return(-1===a||-1!==s&&s<a)&&(a=s),-1!==a&&(i=i.substring(0,a)),isNullOrUndefined(e)?isNullOrUndefined(t)||(r="object"==typeof t&&!0===t[Pe]||!!n&&!0===n[Pe]):r=!0===e[Pe]||!0===i[Pe],!r&&i&&isInternalApplicationInsightsEndpoint(i)&&(r=!0),r?I[i]||(I[i]=1):I[i]&&(r=!0),r}function _isMonitoredXhrInstance(e,t){var n=!0,r=u;return isNullOrUndefined(e)||(n=!0===t||!isNullOrUndefined(e.ajaxData)),r&&n}function _getResponseText(e){try{var t=e.responseType;if(""===t||"text"===t)return e.responseText}catch(e){}return null}function _getAjaxCorrelationContext(t){try{var n=t.getAllResponseHeaders();if(null!==n)if(-1!==_indexOf(n.toLowerCase(),et.requestContextHeaderLowerCase)){var r=t.getResponseHeader(et.requestContextHeader);return st.getCorrelationContext(r)}}catch(n){_throwInternalWarning(e,b.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:_getFailedAjaxDiagnosticsMessage(t),exception:dumpObj(n)})}}function _createMarkId(e,t){if(t.requestUrl&&a&&v){var n=getPerformance();if(n&&isFunction(n.mark)){dn++;var r=a+e+"#"+dn;n.mark(r);var i=n.getEntriesByName(r);i&&1===i.length&&(t.perfMark=i[0])}}}function _findPerfResourceEntry(e,t,n,r){var i=t.perfMark,a=getPerformance(),o=f.maxAjaxPerfLookupAttempts,s=f.ajaxPerfLookupDelay,c=t.requestUrl,l=0;!function locateResourceTiming(){try{if(a&&i){l++;for(var u=null,d=a.getEntries(),f=d.length-1;f>=0;f--){var p=d[f];if(p){if("resource"===p.entryType)p.initiatorType!==e||-1===_indexOf(p.name,c)&&-1===_indexOf(c,p.name)||(u=p);else if("mark"===p.entryType&&p.name===i.name){t.perfTiming=u;break}if(p.startTime<i.startTime-1e3)break}}}!i||t.perfTiming||l>=o||!1===t.async?(i&&isFunction(a.clearMarks)&&a.clearMarks(i.name),t.perfAttempts=l,n()):setTimeout(locateResourceTiming,s)}catch(e){r(e)}}()}function _getFailedFetchDiagnosticsMessage(t){var n="";try{isNullOrUndefined(t)||(n+="(url: '".concat("string"==typeof t?t:t.url,"')"))}catch(t){_throwInternalCritical(e,b.FailedMonitorAjaxOpen,"Failed to grab failed fetch diagnostics message",{exception:dumpObj(t)})}return n}function _reportFetchMetrics(t,n,r,i,a,o,c){function _reportFetchError(t,n,i){var a=i||{};a.fetchDiagnosticsMessage=_getFailedFetchDiagnosticsMessage(r),n&&(a.exception=dumpObj(n)),_throwInternalWarning(e,t,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",a)}a&&(a.responseFinishedTime=dateTimeUtilsNow(),a.status=n,_findPerfResourceEntry("fetch",a,(function(){var t,c=a.CreateTrackItem("Fetch",g,o);try{s&&(t=s({status:n,request:r,response:i}))}catch(t){_throwInternalWarning(e,b.FailedAddingCustomDefinedRequestContext,"Failed to add custom defined request context as configured call back may missing a null check.")}c?(void 0!==t&&(c.properties=p(p({},c.properties),t)),e.trackDependencyDataInternal(c)):_reportFetchError(b.FailedMonitorAjaxDur,null,{requestSentTime:a.requestSentTime,responseFinishedTime:a.responseFinishedTime})}),(function(e){_reportFetchError(b.FailedMonitorAjaxGetCorrelationHeader,e,null)})))}function _getFetchCorrelationContext(t){if(t&&t.headers)try{var n=t.headers.get(et.requestContextHeader);return st.getCorrelationContext(n)}catch(n){_throwInternalWarning(e,b.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:_getFailedFetchDiagnosticsMessage(t),exception:dumpObj(n)})}}e.initialize=function(c,d,m,I){if(!e.isInitialized()){t.initialize(c,d,m,I);var x=e._getTelCtx();objForEachKey(AjaxMonitor.getDefaultConfig(),(function(e,t){f[e]=x.getConfig(AjaxMonitor.identifier,e,t)}));var C=f.distributedTracingMode;if(g=f.enableRequestHeaderTracking,h=f.enableAjaxErrorStatusText,v=f.enableAjaxPerfTracking,_=f.maxAjaxCallsPerView,y=f.enableResponseHeaderTracking,o=f.excludeRequestFromAutoTrackingPatterns,s=f.addRequestContext,i=C===Xe.AI||C===Xe.AI_AND_W3C,r=C===Xe.AI_AND_W3C||C===Xe.W3C,v){var T=c.instrumentationKey||"unkwn";a=T.length>5?ln+T.substring(T.length-5)+".":ln+T+"."}if(!1===f.disableAjaxTracking&&function _instrumentXhr(){(function _supportsAjaxMonitoring(e){var t=!1;if(isXhrSupported()){var n=XMLHttpRequest.prototype;t=!(isNullOrUndefined(n)||isNullOrUndefined(n.open)||isNullOrUndefined(n.send)||isNullOrUndefined(n.abort))}var r=getIEVersion();if(r&&r<9&&(t=!1),t)try{(new XMLHttpRequest).ajaxData={};var i=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=i}catch(n){t=!1,_throwInternalCritical(e,b.FailedMonitorAjaxOpen,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:dumpObj(n)})}return t})(e)&&!u&&(_hookProto(XMLHttpRequest,"open",{req:function(t,r,i,a){var o=t.inst,c=o.ajaxData;!_isDisabledRequest(o,i)&&_isMonitoredXhrInstance(o,!0)&&(c&&c.xhrMonitoringState.openDone||function _openHandler(t,r,i,a){var o=n&&n.telemetryTrace&&n.telemetryTrace.traceID||generateW3CId(),s=generateW3CId().substr(0,16),c=new sn(o,s,e.diagLog());c.method=r,c.requestUrl=i,c.xhrMonitoringState.openDone=!0,c.requestHeaders={},c.async=a,c.errorStatusText=h,t.ajaxData=c}(o,r,i,a),function _attachToOnReadyStateChange(t){t.ajaxData.xhrMonitoringState.stateChangeAttached=attachEvent(t,"readystatechange",(function(){try{t&&4===t.readyState&&_isMonitoredXhrInstance(t)&&function _onAjaxComplete(t){var n=t.ajaxData;function _reportXhrError(n,r){var i=r||{};i.ajaxDiagnosticsMessage=_getFailedAjaxDiagnosticsMessage(t),n&&(i.exception=dumpObj(n)),_throwInternalWarning(e,b.FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",i)}n.responseFinishedTime=dateTimeUtilsNow(),n.status=t.status,_findPerfResourceEntry("xmlhttprequest",n,(function(){try{var r=n.CreateTrackItem("Ajax",g,(function(){var e={statusText:t.statusText,headerMap:null,correlationContext:_getAjaxCorrelationContext(t),type:t.responseType,responseText:_getResponseText(t),response:t.response};if(y){var n=t.getAllResponseHeaders();if(n){var r=strTrim(n).split(/[\r\n]+/),i={};arrForEach(r,(function(e){var t=e.split(": "),n=t.shift(),r=t.join(": ");_canIncludeHeaders(n)&&(i[n]=r)})),e.headerMap=i}}return e})),i=void 0;try{s&&(i=s({status:t.status,xhr:t}))}catch(t){_throwInternalWarning(e,b.FailedAddingCustomDefinedRequestContext,"Failed to add custom defined request context as configured call back may missing a null check.")}r?(void 0!==i&&(r.properties=p(p({},r.properties),i)),e.trackDependencyDataInternal(r)):_reportXhrError(null,{requestSentTime:n.requestSentTime,responseFinishedTime:n.responseFinishedTime})}finally{try{t.ajaxData=null}catch(e){}}}),(function(e){_reportXhrError(e,null)}))}(t)}catch(r){var n=dumpObj(r);n&&-1!==_indexOf(n.toLowerCase(),"c00c023f")||_throwInternalCritical(e,b.FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:_getFailedAjaxDiagnosticsMessage(t),exception:n})}}))}(o))},hkErr:_createErrorCallbackFunc(e,b.FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),_hookProto(XMLHttpRequest,"send",{req:function(t,n){var r=t.inst,i=r.ajaxData;_isMonitoredXhrInstance(r)&&!i.xhrMonitoringState.sendDone&&(_createMarkId("xhr",i),i.requestSentTime=dateTimeUtilsNow(),e.includeCorrelationHeaders(i,void 0,void 0,r),i.xhrMonitoringState.sendDone=!0)},hkErr:_createErrorCallbackFunc(e,b.FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),_hookProto(XMLHttpRequest,"abort",{req:function(e){var t=e.inst,n=t.ajaxData;_isMonitoredXhrInstance(t)&&!n.xhrMonitoringState.abortDone&&(n.aborted=1,n.xhrMonitoringState.abortDone=!0)},hkErr:_createErrorCallbackFunc(e,b.FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),g&&_hookProto(XMLHttpRequest,"setRequestHeader",{req:function(e,t,n){var r=e.inst;_isMonitoredXhrInstance(r)&&_canIncludeHeaders(t)&&(r.ajaxData.requestHeaders[t]=n)},hkErr:_createErrorCallbackFunc(e,b.FailedMonitorAjaxSetRequestHeader,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),u=!0)}(),function _instrumentFetch(){var t=function _supportsFetch(){var e=getGlobal();return!e||isNullOrUndefined(e.Request)||isNullOrUndefined(e.Request.prototype)||isNullOrUndefined(e.fetch)?null:e.fetch}();if(!t)return;var r=getGlobal(),i=t.polyfill;!1===f.disableFetchTracking?(S.push(InstrumentFunc(r,un,{req:function(t,r,a){var o;if(l&&!_isDisabledRequest(null,r,a)&&(!i||!u)){var s=t.ctx();o=function _createFetchRecord(t,r){var i=n&&n.telemetryTrace&&n.telemetryTrace.traceID||generateW3CId(),a=generateW3CId().substr(0,16),o=new sn(i,a,e.diagLog());o.requestSentTime=dateTimeUtilsNow(),o.errorStatusText=h,t instanceof Request?o.requestUrl=t?t.url:"":o.requestUrl=t;var s="GET";r&&r.method?s=r.method:t&&t instanceof Request&&(s=t.method);o.method=s;var c={};if(g){new Headers((r?r.headers:0)||t instanceof Request&&t.headers||{}).forEach((function(e,t){_canIncludeHeaders(t)&&(c[t]=e)}))}return o.requestHeaders=c,_createMarkId("fetch",o),o}(r,a);var c=e.includeCorrelationHeaders(o,r,a);c!==a&&t.set(1,c),s.data=o}},rsp:function(e,t){var n=e.ctx().data;n&&(e.rslt=e.rslt.then((function(r){return _reportFetchMetrics(e,(r||{}).status,t,r,n,(function(){var e={statusText:r.statusText,headerMap:null,correlationContext:_getFetchCorrelationContext(r)};if(y){var t={};r.headers.forEach((function(e,n){_canIncludeHeaders(n)&&(t[n]=e)})),e.headerMap=t}return e})),r})).catch((function(r){throw _reportFetchMetrics(e,0,t,null,n,null,{error:r.message}),r})))},hkErr:_createErrorCallbackFunc(e,b.FailedMonitorAjaxOpen,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),l=!0):i&&S.push(InstrumentFunc(r,un,{req:function(e,t,n){_isDisabledRequest(null,t,n)}}));i&&(r.fetch.polyfill=i)}(),m.length>0&&m){for(var w=void 0,E=0;!w&&E<m.length;)m[E]&&m[E].identifier===Ce&&(w=m[E]),E++;w&&(n=w.context)}}},e.teardown=function(){arrForEach(S,(function(e){e.rm()})),S=[],l=!1,u=!1,e.setInitialized(!1)},e.trackDependencyData=function(t,n){e.trackDependencyDataInternal(t,n)},e.includeCorrelationHeaders=function(t,a,o,s){var c=e._currentWindowHost||d;if(a){if(st.canIncludeCorrelationHeader(f,t.getAbsoluteUrl(),c)){if(o||(o={}),o.headers=new Headers(o.headers||a instanceof Request&&a.headers||{}),i){var l="|"+t.traceID+"."+t.spanID;o.headers.set(et.requestIdHeader,l),g&&(t.requestHeaders[et.requestIdHeader]=l)}if((p=f.appId||n&&n.appId())&&(o.headers.set(et.requestContextHeader,et.requestContextAppIdFormat+p),g&&(t.requestHeaders[et.requestContextHeader]=et.requestContextAppIdFormat+p)),r){var u=new cn(t.traceID,t.spanID);o.headers.set(et.traceParentHeader,u.toString()),g&&(t.requestHeaders[et.traceParentHeader]=u.toString())}}return o}if(s){if(st.canIncludeCorrelationHeader(f,t.getAbsoluteUrl(),c)){if(i){l="|"+t.traceID+"."+t.spanID;s.setRequestHeader(et.requestIdHeader,l),g&&(t.requestHeaders[et.requestIdHeader]=l)}var p;if((p=f.appId||n&&n.appId())&&(s.setRequestHeader(et.requestContextHeader,et.requestContextAppIdFormat+p),g&&(t.requestHeaders[et.requestContextHeader]=et.requestContextAppIdFormat+p)),r){u=new cn(t.traceID,t.spanID);s.setRequestHeader(et.traceParentHeader,u.toString()),g&&(t.requestHeaders[et.traceParentHeader]=u.toString())}}return s}},e.trackDependencyDataInternal=function(t,n,r){if(-1===_||m<_){f.distributedTracingMode!==Xe.W3C&&f.distributedTracingMode!==Xe.AI_AND_W3C||"string"!=typeof t.id||"."===t.id[t.id.length-1]||(t.id+="."),isNullOrUndefined(t.startTime)&&(t.startTime=new Date);var i=Oe.create(t,lt.dataType,lt.envelopeType,e.diagLog(),n,r);e.core.track(i)}else m===_&&_throwInternalCritical(e,b.MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++m}})),t}return __extendsFn(AjaxMonitor,e),AjaxMonitor.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,excludeRequestFromAutoTrackingPatterns:void 0,disableCorrelationHeaders:!1,distributedTracingMode:Xe.AI_AND_W3C,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,correlationHeaderExcludePatterns:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"],addRequestContext:void 0}},AjaxMonitor.getEmptyConfig=function(){var e=this.getDefaultConfig();return objForEachKey(e,(function(t){e[t]=void 0})),e},AjaxMonitor.prototype.processTelemetry=function(e,t){this.processNext(e,t)},AjaxMonitor.identifier="AjaxDependencyPlugin",AjaxMonitor}(J);function parseConnectionString(e){if(!e)return{};var t=arrReduce(e.split(";"),(function(e,t){var n=t.split("=");if(2===n.length){var r=n[0].toLowerCase(),i=n[1];e[r]=i}return e}),{});if(objKeys(t).length>0){if(t.endpointsuffix){var n=t.location?t.location+".":"";t.ingestionendpoint=t.ingestionendpoint||"https://"+n+"dc."+t.endpointsuffix}t.ingestionendpoint=t.ingestionendpoint||Ae}return t}var pn,gn={parse:parseConnectionString},hn=function(){function ConfigurationManager(){}return ConfigurationManager.getConfig=function(e,t,n,r){var i;return void 0===r&&(r=!1),i=n&&e.extensionConfig&&e.extensionConfig[n]&&!isNullOrUndefined(e.extensionConfig[n][t])?e.extensionConfig[n][t]:e[t],isNullOrUndefined(i)?r:i},ConfigurationManager}(),mn=["snippet","dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],vn={__proto__:null,PropertiesPluginIdentifier:Ce,BreezeChannelIdentifier:be,AnalyticsPluginIdentifier:Te,Util:at,CorrelationIdHelper:st,UrlHelper:ot,DateTimeUtils:ct,ConnectionStringParser:gn,FieldType:{Default:0,Required:1,Array:2,Hidden:4},RequestHeaders:et,DisabledPropertyName:Pe,ProcessLegacy:De,SampleRate:Ne,HttpMethod:ke,DEFAULT_BREEZE_ENDPOINT:Ae,AIData:At,AIBase:kt,Envelope:Dt,Event:Ue,Exception:Je,Metric:Ve,PageView:ze,PageViewData:Be,RemoteDependencyData:lt,Trace:Re,PageViewPerformance:He,Data:Ft,SeverityLevel:Ke,ConfigurationManager:hn,ContextTagKeys:Et,DataSanitizer:Ee,TelemetryItemCreator:Oe,CtxTagKeys:Nt,Extensions:Pt,DistributedTracingModes:Xe},_n=function(){function Initialization(e){var t=this;t._snippetVersion=""+(e.sv||e.version||""),e.queue=e.queue||[],e.version=e.version||2;var n=e.config||{};if(n.connectionString){var r=parseConnectionString(n.connectionString),i=r.ingestionendpoint;n.endpointUrl=i?"".concat(i,"/v2/track"):n.endpointUrl,n.instrumentationKey=r.instrumentationkey||n.instrumentationKey}t.appInsights=new gt,t.properties=new nn,t.dependencies=new fn,t.core=new de,t._sender=new qt,t.snippet=e,t.config=n,t.getSKUDefaults()}return Initialization.prototype.getCookieMgr=function(){return this.appInsights.getCookieMgr()},Initialization.prototype.trackEvent=function(e,t){this.appInsights.trackEvent(e,t)},Initialization.prototype.trackPageView=function(e){var t=e||{};this.appInsights.trackPageView(t)},Initialization.prototype.trackPageViewPerformance=function(e){var t=e||{};this.appInsights.trackPageViewPerformance(t)},Initialization.prototype.trackException=function(e,t){e&&!e.exception&&e.error&&(e.exception=e.error),this.appInsights.trackException(e,t)},Initialization.prototype._onerror=function(e){this.appInsights._onerror(e)},Initialization.prototype.trackTrace=function(e,t){this.appInsights.trackTrace(e,t)},Initialization.prototype.trackMetric=function(e,t){this.appInsights.trackMetric(e,t)},Initialization.prototype.startTrackPage=function(e){this.appInsights.startTrackPage(e)},Initialization.prototype.stopTrackPage=function(e,t,n,r){this.appInsights.stopTrackPage(e,t,n,r)},Initialization.prototype.startTrackEvent=function(e){this.appInsights.startTrackEvent(e)},Initialization.prototype.stopTrackEvent=function(e,t,n){this.appInsights.stopTrackEvent(e,t,n)},Initialization.prototype.addTelemetryInitializer=function(e){return this.appInsights.addTelemetryInitializer(e)},Initialization.prototype.setAuthenticatedUserContext=function(e,t,n){void 0===n&&(n=!1),this.properties.context.user.setAuthenticatedUserContext(e,t,n)},Initialization.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},Initialization.prototype.trackDependencyData=function(e){this.dependencies.trackDependencyData(e)},Initialization.prototype.flush=function(e){var t=this;void 0===e&&(e=!0),doPerf(this.core,(function(){return"AISKU.flush"}),(function(){arrForEach(t.core.getTransmissionControls(),(function(t){arrForEach(t,(function(t){t.flush(e)}))}))}),null,e)},Initialization.prototype.onunloadFlush=function(e){void 0===e&&(e=!0),arrForEach(this.core.getTransmissionControls(),(function(t){arrForEach(t,(function(t){t.onunloadFlush?t.onunloadFlush():t.flush(e)}))}))},Initialization.prototype.loadAppInsights=function(e,t,n){var r=this;void 0===e&&(e=!1);var i=this;return e&&i.config.extensions&&i.config.extensions.length>0&&throwError("Extensions not allowed in legacy mode"),doPerf(i.core,(function(){return"AISKU.loadAppInsights"}),(function(){var a=[];a.push(i._sender),a.push(i.properties),a.push(i.dependencies),a.push(i.appInsights),i.core.initialize(i.config,a,t,n),i.context=i.properties.context,pn&&i.context&&(i.context.internal.sdkSrc=pn),function _updateSnippetProperties(t){if(t){var n="";isNullOrUndefined(i._snippetVersion)||(n+=i._snippetVersion),e&&(n+=".lg"),i.context&&i.context.internal&&(i.context.internal.snippetVer=n||"-"),objForEachKey(i,(function(e,n){HelperFuncs_isString(e)&&!isFunction(n)&&e&&"_"!==e[0]&&-1===mn.indexOf(e)&&(t[e]=n)}))}}(i.snippet),i.emptyQueue(),i.pollInternalLogs(),i.addHousekeepingBeforeUnload(r)})),i},Initialization.prototype.updateSnippetDefinitions=function(e){proxyAssign(e,this,(function(e){return e&&-1===mn.indexOf(e)}))},Initialization.prototype.emptyQueue=function(){var e=this;try{if(isArray(e.snippet.queue)){for(var t=e.snippet.queue.length,n=0;n<t;n++){(0,e.snippet.queue[n])()}e.snippet.queue=void 0,delete e.snippet.queue}}catch(e){e&&isFunction(e.toString)&&e.toString()}},Initialization.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},Initialization.prototype.stopPollingInternalLogs=function(){this.core.stopPollingInternalLogs()},Initialization.prototype.addHousekeepingBeforeUnload=function(e){if(hasWindow()||hasDocument()){var performHousekeeping=function(){e.onunloadFlush(!1),arrForEach(e.appInsights.core._extensions,(function(e){if(e.identifier===Ce)return e&&e.context&&e.context._sessionManager&&e.context._sessionManager.backup(),-1}))},t=!1,n=e.appInsights.config.disablePageUnloadEvents;e.appInsights.config.disableFlushOnBeforeUnload||(t=addPageUnloadEventListener(performHousekeeping,n),(t=addPageHideEventListener(performHousekeeping,n)||t)||function isReactNative(){var e=getNavigator();return!(!e||!e.product)&&"ReactNative"===e.product}()||e.appInsights.core.logger.throwInternal(C.CRITICAL,b.FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload and pagehide")),t||e.appInsights.config.disableFlushOnUnload||addPageHideEventListener(performHousekeeping,n)}},Initialization.prototype.getSender=function(){return this._sender},Initialization.prototype.getSKUDefaults=function(){var e=this;e.config.diagnosticLogInterval=e.config.diagnosticLogInterval&&e.config.diagnosticLogInterval>0?e.config.diagnosticLogInterval:1e4},Initialization}();!function(){var e=null,t=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var n=(document||{}).currentScript;n&&(e=n.src)}catch(e){}if(e)try{var r=e.toLowerCase();if(r)for(var i="",a=0;a<t.length;a++)if(-1!==r.indexOf(t[a])){i="cdn"+(a+1),-1===r.indexOf("/scripts/")&&(-1!==r.indexOf("/next/")?i+="-next":-1!==r.indexOf("/beta/")&&(i+="-beta")),pn=i+"";break}}catch(e){}}();var yn=["snippet","getDefaultConfig","_hasLegacyInitializers","_queue","_processLegacyInitializers"],Sn=function(){function AppInsightsDeprecated(e,t){this._hasLegacyInitializers=!1,this._queue=[],this.config=AppInsightsDeprecated.getDefaultConfig(e.config),this.appInsightsNew=t,this.context={addTelemetryInitializer:this.addTelemetryInitializers.bind(this)}}return AppInsightsDeprecated.getDefaultConfig=function(e){return e||(e={}),e.endpointUrl=e.endpointUrl||"https://dc.services.visualstudio.com/v2/track",e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.maxBatchSizeInBytes=e.maxBatchSizeInBytes>0?e.maxBatchSizeInBytes:102400,e.maxBatchInterval=isNaN(e.maxBatchInterval)?15e3:e.maxBatchInterval,e.enableDebug=stringToBoolOrDefault(e.enableDebug),e.disableExceptionTracking=stringToBoolOrDefault(e.disableExceptionTracking),e.disableTelemetry=stringToBoolOrDefault(e.disableTelemetry),e.verboseLogging=stringToBoolOrDefault(e.verboseLogging),e.emitLineDelimitedJson=stringToBoolOrDefault(e.emitLineDelimitedJson),e.diagnosticLogInterval=e.diagnosticLogInterval||1e4,e.autoTrackPageVisitTime=stringToBoolOrDefault(e.autoTrackPageVisitTime),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.disableAjaxTracking=stringToBoolOrDefault(e.disableAjaxTracking),e.maxAjaxCallsPerView=isNaN(e.maxAjaxCallsPerView)?500:e.maxAjaxCallsPerView,e.isBeaconApiDisabled=stringToBoolOrDefault(e.isBeaconApiDisabled,!0),e.disableCorrelationHeaders=stringToBoolOrDefault(e.disableCorrelationHeaders),e.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains||["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],e.disableFlushOnBeforeUnload=stringToBoolOrDefault(e.disableFlushOnBeforeUnload),e.disableFlushOnUnload=stringToBoolOrDefault(e.disableFlushOnUnload,e.disableFlushOnBeforeUnload),e.enableSessionStorageBuffer=stringToBoolOrDefault(e.enableSessionStorageBuffer,!0),e.isRetryDisabled=stringToBoolOrDefault(e.isRetryDisabled),e.isCookieUseDisabled=stringToBoolOrDefault(e.isCookieUseDisabled),e.isStorageUseDisabled=stringToBoolOrDefault(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=stringToBoolOrDefault(e.isBrowserLinkTrackingEnabled),e.enableCorsCorrelation=stringToBoolOrDefault(e.enableCorsCorrelation),e},AppInsightsDeprecated.prototype.addTelemetryInitializers=function(e){var t=this;this._hasLegacyInitializers||(this.appInsightsNew.addTelemetryInitializer((function(e){t._processLegacyInitializers(e)})),this._hasLegacyInitializers=!0),this._queue.push(e)},AppInsightsDeprecated.prototype.getCookieMgr=function(){return this.appInsightsNew.getCookieMgr()},AppInsightsDeprecated.prototype.startTrackPage=function(e){this.appInsightsNew.startTrackPage(e)},AppInsightsDeprecated.prototype.stopTrackPage=function(e,t,n,r){this.appInsightsNew.stopTrackPage(e,t,n)},AppInsightsDeprecated.prototype.trackPageView=function(e,t,n,r,i){var a={name:e,uri:t,properties:n,measurements:r};this.appInsightsNew.trackPageView(a)},AppInsightsDeprecated.prototype.trackEvent=function(e,t,n){this.appInsightsNew.trackEvent({name:e})},AppInsightsDeprecated.prototype.trackDependency=function(e,t,n,r,i,a,o){this.appInsightsNew.trackDependencyData({id:e,target:n,type:r,duration:i,properties:{HttpMethod:t},success:a,responseCode:o})},AppInsightsDeprecated.prototype.trackException=function(e,t,n,r,i){this.appInsightsNew.trackException({exception:e})},AppInsightsDeprecated.prototype.trackMetric=function(e,t,n,r,i,a){this.appInsightsNew.trackMetric({name:e,average:t,sampleCount:n,min:r,max:i})},AppInsightsDeprecated.prototype.trackTrace=function(e,t,n){this.appInsightsNew.trackTrace({message:e,severityLevel:n})},AppInsightsDeprecated.prototype.flush=function(e){this.appInsightsNew.flush(e)},AppInsightsDeprecated.prototype.setAuthenticatedUserContext=function(e,t,n){this.appInsightsNew.context.user.setAuthenticatedUserContext(e,t,n)},AppInsightsDeprecated.prototype.clearAuthenticatedUserContext=function(){this.appInsightsNew.context.user.clearAuthenticatedUserContext()},AppInsightsDeprecated.prototype._onerror=function(e,t,n,r,i){this.appInsightsNew._onerror({message:e,url:t,lineNumber:n,columnNumber:r,error:i})},AppInsightsDeprecated.prototype.startTrackEvent=function(e){this.appInsightsNew.startTrackEvent(e)},AppInsightsDeprecated.prototype.stopTrackEvent=function(e,t,n){this.appInsightsNew.stopTrackEvent(e,t,n)},AppInsightsDeprecated.prototype.downloadAndSetup=function(e){throwError("downloadAndSetup not implemented in web SKU")},AppInsightsDeprecated.prototype.updateSnippetDefinitions=function(e){proxyAssign(e,this,(function(e){return e&&-1===yn.indexOf(e)}))},AppInsightsDeprecated.prototype.loadAppInsights=function(){var e=this;if(this.config.iKey){var t=this.trackPageView;this.trackPageView=function(n,r,i){t.apply(e,[null,n,r,i])}}"function"==typeof this.snippet.logPageView&&(this.logPageView=function(t,n,r){e.trackPageView(null,t,n,r)});return"function"==typeof this.snippet.logEvent&&(this.logEvent=function(t,n,r){e.trackEvent(t,n,r)}),this},AppInsightsDeprecated.prototype._processLegacyInitializers=function(e){return e.tags.ProcessLegacy=this._queue,e},AppInsightsDeprecated}(),In=function(){function ApplicationInsightsContainer(){}return ApplicationInsightsContainer.getAppInsights=function(e,t){var n=new _n(e),r=2!==t;if(_legacyCookieMgr(),2===t)return n.updateSnippetDefinitions(e),n.loadAppInsights(r),n;var i=new Sn(e,n);return i.updateSnippetDefinitions(e),n.loadAppInsights(r),i},ApplicationInsightsContainer}()},685:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r="#ifdef GL_ES\nprecision highp float;\n#endif\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform vec2 u_seed[2];\n\nvoid main() {\n    float uni = fract(\n    tan(distance(\n        gl_FragCoord.xy,\n        u_resolution * (u_seed[0] + 1.0)\n    )) * distance(\n        gl_FragCoord.xy,\n        u_resolution * (u_seed[1] - 2.0)\n    )\n    );\n    gl_FragColor = vec4(uni, uni, uni, 1.0);\n}\n"},374:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\n\nvoid main() {\n    gl_Position = vec4(aVertexPosition, 0.0, 1.0);\n}\t\t\t\n"},478:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Noise=void 0;const r=n(191),i=(0,r.__importDefault)(n(374)),a=(0,r.__importDefault)(n(685));t.Noise=class Noise{constructor(e){this._canvas=e,this._milliseconds=60,this._numItems=0,this._gl=this._canvas.getContext("webgl"),this.initialize(),this.startRendering()}get milliseconds(){return this._milliseconds}set milliseconds(e){this._milliseconds=e,this.startRendering()}getVerticesFor(){let e=this._canvas.width/this._canvas.height;return e=1,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1])}initialize(){const e=this._gl.createShader(this._gl.VERTEX_SHADER);this._gl.shaderSource(e,i.default),this._gl.compileShader(e);const t=this._gl.createShader(this._gl.FRAGMENT_SHADER);this._gl.shaderSource(t,a.default),this._gl.compileShader(t),this._program=this._gl.createProgram(),this._gl.attachShader(this._program,e),this._gl.attachShader(this._program,t),this._gl.linkProgram(this._program);const n=this._gl.createBuffer();this._gl.bindBuffer(this._gl.ARRAY_BUFFER,n),this._gl.useProgram(this._program);this._program.u_resolution=this._gl.getUniformLocation(this._program,"u_resolution"),this._program.u_seed=this._gl.getUniformLocation(this._program,"u_seed"),this._gl.uniform2fv(this._program.u_resolution,[512,512]);const r=this.getVerticesFor();this._gl.bufferData(this._gl.ARRAY_BUFFER,r,this._gl.STATIC_DRAW);this._numItems=r.length/2,this._program.aVertexPosition=this._gl.getAttribLocation(this._program,"aVertexPosition"),this._gl.enableVertexAttribArray(this._program.aVertexPosition),this._gl.vertexAttribPointer(this._program.aVertexPosition,2,this._gl.FLOAT,!1,0,0)}render(){const e=Array(4).fill(0).map(Math.random);this._gl.uniform2fv(this._program.u_seed,e),this._gl.clearColor(1,0,0,.5),this._gl.clear(this._gl.COLOR_BUFFER_BIT),this._gl.drawArrays(this._gl.TRIANGLES,0,this._numItems),this._canvas.width=this._canvas.parentElement.offsetWidth-16,this._canvas.height=this._canvas.parentElement.offsetHeight,this._canvas.style.top=`${this._canvas.parentElement.offsetTop}px`,this._gl.viewport(0,0,this._canvas.width,this._canvas.height);const t=this.getVerticesFor();this._gl.bufferData(this._gl.ARRAY_BUFFER,t,this._gl.STATIC_DRAW)}startRendering(){this._timer&&clearInterval(this._timer),this._timer=setInterval(this.render.bind(this),this._milliseconds)}}},191:(e,t,n)=>{n.r(t),n.d(t,{__extends:()=>__extends,__assign:()=>__assign,__rest:()=>__rest,__decorate:()=>__decorate,__param:()=>__param,__metadata:()=>__metadata,__awaiter:()=>__awaiter,__generator:()=>__generator,__createBinding:()=>r,__exportStar:()=>__exportStar,__values:()=>__values,__read:()=>__read,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__spreadArray:()=>__spreadArray,__await:()=>__await,__asyncGenerator:()=>__asyncGenerator,__asyncDelegator:()=>__asyncDelegator,__asyncValues:()=>__asyncValues,__makeTemplateObject:()=>__makeTemplateObject,__importStar:()=>__importStar,__importDefault:()=>__importDefault,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet});var extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},extendStatics(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){return __assign=Object.assign||function __assign(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign.apply(this,arguments)};function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function __decorate(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function __param(e,t){return function(n,r){t(n,r,e)}}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(i,a){function fulfilled(e){try{step(r.next(e))}catch(e){a(e)}}function rejected(e){try{step(r.throw(e))}catch(e){a(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))}function __generator(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(a){return function(s){return function step(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var r=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function __exportStar(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function __spreadArray(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r;function verb(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||resume(e,t)}))})}function resume(e,t){try{!function step(e){e.value instanceof __await?Promise.resolve(e.value.v).then(fulfill,reject):settle(a[0][2],e)}(i[e](t))}catch(e){settle(a[0][3],e)}}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),a.shift(),a.length&&resume(a[0][0],a[0][1])}}function __asyncDelegator(e){var t,n;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:__await(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=__values(e),t={},verb("next"),verb("throw"),verb("return"),t[Symbol.asyncIterator]=function(){return this},t);function verb(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function settle(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function __classPrivateFieldSet(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}}},t={};function __webpack_require__(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,__webpack_require__),i.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};(()=>{const e=__webpack_require__(478),t=__webpack_require__(690),n=document.createElement("div");n.style["pointer-events"]="none",n.style.position="fixed",n.style.top="0px",n.style.zIndex="1000",n.style.width="100%",n.style.height="100%",n.style.opacity="0.5",document.body.appendChild(n);const r=document.createElement("canvas");r.style["pointer-events"]="none",r.style.position="fixed",r.style.top="0px",r.style.zIndex="1000",r.style.width="100%",r.style.height="100%",r.style.opacity="0.5",n.appendChild(r);let i="";const a=new t.ApplicationInsights({config:{connectionString:"InstrumentationKey=811364f1-6066-4154-adc1-97b0ebd65535;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/"}});a.loadAppInsights();const o=new e.Noise(r);function handleOpacity(e=.3){r.style.opacity=null==e?void 0:e.toString()}function handleEnabled(e){r.style.display=e?"":"none"}window.onbeforeunload=function(e){a.trackEvent({name:"stopReading"},{userId:i})},handleOpacity(),chrome.storage.sync.get(["milliseconds","opacity","enabled","userId"],(e=>{void 0!==e.enabled&&handleEnabled(e.enabled),e.milliseconds&&(o.milliseconds=e.milliseconds),e.opacity&&handleOpacity(e.opacity),i=e.userId,i&&""!=i||(i=function createUserToken(){var e=new Uint8Array(32);crypto.getRandomValues(e);for(var t="",n=0;n<e.length;++n)t+=e[n].toString(16);return t}(),chrome.storage.sync.set({userId:i},(function(){}))),a.trackEvent({name:"startReading"},{userId:i,milliseconds:e.milliseconds,opacity:e.opacity})})),chrome.storage.onChanged.addListener((e=>{e.enabled&&handleEnabled(e.enabled.newValue),e.milliseconds&&(o.milliseconds=e.milliseconds.newValue),e.opacity&&handleOpacity(e.opacity.newValue)}))})()})();